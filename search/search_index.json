{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Accueil - P\u00f4le Chartres","text":""},{"location":"#presentation","title":"Pr\u00e9sentation","text":"<p>BTS SIO option SISR Ann\u00e9e scolaire 2025-2026  </p> <p>Enseignant : Ludovic MERY Co-Enseignant : Kevin Huet  </p>"},{"location":"#le-pole-chartres","title":"Le P\u00f4le Chartres","text":"<p>Le site de Chartres est le si\u00e8ge de SportLudique SARL et regroupe les fonctions strat\u00e9giques et administratives de l\u2019entreprise. Il constitue le c\u0153ur op\u00e9rationnel de la soci\u00e9t\u00e9 avec plusieurs d\u00e9partements cl\u00e9s.</p>"},{"location":"#fonctions-et-departements","title":"Fonctions et d\u00e9partements","text":"<p>Le site de Chartres accueille :</p> <ul> <li>Direction g\u00e9n\u00e9rale </li> <li>Marketing </li> <li>Finances </li> <li>Ressources humaines </li> <li>Direction des Services Informatiques (DSI)</li> </ul> <p>La DSI est dirig\u00e9e par Monsieur Claude Postic et compte 4 techniciens. Le service RH est dirig\u00e9 par Madame Helen Paisley-Le Bihan.</p>"},{"location":"#mission-du-site","title":"Mission du site","text":"<p>Le P\u00f4le Chartres assure la coordination des activit\u00e9s de l\u2019ensemble des sites et joue un r\u00f4le central dans :</p> <ul> <li>La gestion administrative et financi\u00e8re  </li> <li>Le marketing et la promotion des produits  </li> <li>La supervision de la production et de la logistique via les autres sites  </li> <li>Le support et la maintenance informatique interne  </li> </ul>"},{"location":"#informations-cles","title":"Informations cl\u00e9s","text":"<ul> <li>Si\u00e8ge social : Agglom\u00e9ration chartraine  </li> <li>Effectif sur le site : Inclus dans les 452 employ\u00e9s de l\u2019entreprise  </li> <li>Activit\u00e9 : Conception et fabrication d\u2019articles de sports et loisirs, ainsi que la proposition d\u2019installations cl\u00e9 en main aux collectivit\u00e9s  </li> </ul>"},{"location":"#schema-reseau","title":"Schema r\u00e9seau","text":""},{"location":"#schema-physique","title":"Schema physique","text":""},{"location":"#photo-de-la-baie","title":"Photo de la baie","text":""},{"location":"#photo-de-la-baie-serveur","title":"Photo de la baie serveur","text":""},{"location":"DNS/DNS%20Resolveur/","title":"Configuration DNS Resolveur UNBOUND","text":"<p>On met en place Unbound comme r\u00e9solveur DNS (non validateur DNSSEC) sur une VM Debian, en l\u2019int\u00e9grant \u00e0 un DNS autoritaire.</p>"},{"location":"DNS/DNS%20Resolveur/#1-installation-de-unbound","title":"\ud83d\udce6 1. Installation de UNBOUND","text":"<pre><code>sudo apt update\nsudo apt install unbound -y\n</code></pre> <p>Unbound se lancera automatiquement apr\u00e8s l'installation.</p> <p>V\u00e9rifier si c'est bien le cas :</p> <pre><code>sudo systemctl status unbound\n</code></pre>"},{"location":"DNS/DNS%20Resolveur/#2-configuration-du-dns","title":"\ud83d\udd27 2. Configuration du DNS","text":"<p>Editer le fichier suivant :</p> <pre><code>sudo nano /etc/unbound/unbound.conf\n</code></pre> <p>Puis ajouter votre conf :</p> <pre><code>server:\n    #######################################################################\n    #  PARAM\u00c8TRES G\u00c9N\u00c9RAUX DU SERVEUR UNBOUND\n    #######################################################################\n\n    # Interfaces d'\u00e9coute\n    interface: 0.0.0.0\n    interface: ::0\n    port: 53\n\n    # Autorise IPv4, d\u00e9sactive IPv6 si inutile\n    do-ip4: yes\n    do-ip6: no\n    do-udp: yes\n    do-tcp: yes\n\n    # R\u00e9seaux autoris\u00e9s \u00e0 interroger le r\u00e9solveur\n    access-control: 127.0.0.0/8 allow        # localhost\n    access-control: 172.28.33.0/24 allow     # LAN\n    access-control: 172.28.62.0/24 allow     # DMZ\n    access-control: 172.28.35.0/24           # CLIENTS\n    access-control: 0.0.0.0/0 refuse         # tout le reste bloqu\u00e9\n\n    # D\u00e9sactive DNSSEC\n    module-config: \"iterator\"\n    val-permissive-mode: no\n    auto-trust-anchor-file: \"\"\n    trust-anchor-signaling: no\n    harden-dnssec-stripped: no\n\n    # R\u00e9pertoires de travail\n    directory: \"/etc/unbound\"\n    logfile: \"/var/log/unbound.log\"\n    verbosity: 1\n\n    # Cache\n    cache-min-ttl: 60\n    cache-max-ttl: 86400\n\n#######################################################################\n#  D\u00c9CLARATION DES ZONES AVEC SERVEURS FORWARDERS SP\u00c9CIFIQUES\n#######################################################################\n\n# Zone locale -&gt; DNS de la DMZ\nstub-zone:\n    name: \"chartres.sportludique.fr\"\n    stub-addr: 172.28.62.1     # \u2190 IP du DNS autoritaire de la DMZ\n\n# Zone de l\u2019entreprise -&gt; DNS de l\u2019enseignant\nstub-zone:\n    name: \"sportludique.fr\"\n    stub-addr: 121.183.90.205  # \u2190 IP du DNS de l\u2019enseignant\n</code></pre> <p>V\u00e9rifier la syntaxe :</p> <pre><code>sudo unbound-checkconf\n</code></pre> <p>Si il y a des erreurs, le DNS ne fonctionnerra pas car vous ne pourrais pas red\u00e9marrer le service donc il faut absolument r\u00e9soudre les erreurs.</p> <p>Sinon red\u00e9marrer le service :</p> <pre><code>sudo systemctl restart unbound\nsudo systemctl enable unbound\n</code></pre> <p>V\u00e9rifier que le DNS redirige bien vers l'autorit\u00e9 :</p> <pre><code>sudo cat /etc/resolve.conf\n</code></pre> <p>Le r\u00e9sultat attendus est :</p> <pre><code>nameserver 172.28.62.1\nsearch chartres.sportludique.fr\n</code></pre>"},{"location":"DNS/DNS%20Resolveur/#3-verification","title":"\u2705 3. V\u00e9rification","text":"<p>Tester depuis le client avec \"nslookup ns1.chartres.sportludique.fr\".</p> <p>Il devrait renvoyer l'adresse IP du DNS autorit\u00e9.</p> <p>Et ensuite tester depuis un poste d'un autre groupe avec la m\u00eame commande.</p> <p>Il devrait renvoyer l'adresse IP de la FAI (183.44.28.1).</p>"},{"location":"DNS/DNS%20autorit%C3%A9/","title":"Configuration DNS autorit\u00e9 BIND9","text":"<p>Cette documentation sert a d\u00e9tailler l'installation et la configuration de notre serveur DNS d'autorit\u00e9 gr\u00e2ce au service BIND9 bas\u00e9 sur Debian 13.</p>"},{"location":"DNS/DNS%20autorit%C3%A9/#1-preparation","title":"\ud83d\udcdd 1. Pr\u00e9paration","text":"<p>Avant de commencer il faut se poser les bonnes questions, nous aurons donc besoin : </p> <ol> <li> <p>Serveur d'autorit\u00e9 UNIQUEMENT  aucune r\u00e9cursivit\u00e9 sur celui-ci</p> </li> <li> <p>Deux zones de recherche DNS, une locale et une externe, explication sur le mkdoc de Mr Merry</p> </li> <li> <p>Un PAT sur le routeur pour les utilisateurs externes</p> </li> <li> <p>Des routes statiques sur le DNS d'autorit\u00e9 \u00e0 cause de l'IP Forwarding bloqu\u00e9 par l'IPS du StormShield</p> </li> </ol>"},{"location":"DNS/DNS%20autorit%C3%A9/#2-installation-de-bind9","title":"\ud83d\udce6 2. Installation de BIND9","text":"<pre><code>sudo apt update \nsudo apt upgrade \nsudo apt install bind9 bind9utils bind9-doc dnsutils -y\n</code></pre> <p>(1)</p> <ol> <li>A noter que <code>bind9utils bind9-doc dnsutils</code> ne sont que des outils suppl\u00e9mentaires pour le test du DNS et du BIND9</li> </ol>"},{"location":"DNS/DNS%20autorit%C3%A9/#3-creation-des-dossier-dedies","title":"\u270f\ufe0f 3. Cr\u00e9ation des dossier d\u00e9di\u00e9s","text":"<p>Cr\u00e9ation de dossiers o\u00f9 l'on va stocker nos fichiers de zones et attribution des droits au service BIND9</p> <pre><code>sudo mkdir -p /etc/bind/zones\nsudo chown bind:bind /etc/bind/zones\n</code></pre>"},{"location":"DNS/DNS%20autorit%C3%A9/#4-configuration-des-views","title":"\ud83d\udd27 4. Configuration des \"views\"","text":"<p>Les \"view\" sont les diff\u00e9rentes zones que notre DNS va utiliser en fonction des adresses que ces m\u00eames zones desservent. </p> <pre><code>sudo nano /etc/bind/name.conf.local\n</code></pre> <pre><code>// === VUE INTERNE ===\nview \"internal\" {\n    match-clients { 172.28.0.0/16; 127.0.0.1; };\n    recursion no;\n\n    zone \"chartres.sportludique.fr\" {\n        type master;\n        file \"/etc/bind/zones/db.chartres.sportludique.fr.internal\";\n    };\n};\n\n// === VUE EXTERNE ===\nview \"external\" {\n    match-clients { any; };\n    recursion no;\n\n    zone \"chartres.sportludique.fr\" {\n        type master;\n        file \"/etc/bind/zones/db.chartres.sportludique.fr.external\";\n    };\n};\n</code></pre>"},{"location":"DNS/DNS%20autorit%C3%A9/#5-creation-des-fichiers-de-zones","title":"\u270f\ufe0f 5. Cr\u00e9ation des fichiers de zones","text":""},{"location":"DNS/DNS%20autorit%C3%A9/#creation-du-fichier-internal","title":"Cr\u00e9ation du fichier \"internal\"","text":"<p>Ce fichier servira a traduire les noms de domaines en IP pour toutes les adresses du LAN. <pre><code>sudo nano /etc/bind/zones/db.chartres.sportludique.fr.internal\n</code></pre></p> <pre><code>$TTL 86400\n@   IN  SOA ns1.chartres.sportludique.fr. admin.chartres.sportludique.fr. (\n        2025100701 ; Num\u00e9ros de s\u00e9rie au format YYYY/MM/DD/01\n        3600       ; Intervalle de rafra\u00eechissement\n        1800       ; Intervalle de r\u00e9essai\n        1209600    ; Intervalle d'expiration\n        86400 )    ; Dur\u00e9e minimale de cache\n\n; Serveurs de nom\n@   IN  NS  ns1.chartres.sportludique.fr.\n\n; Enregistrements\nns1 IN  A   172.28.62.1   ; Serveur DNS d'autorit\u00e9 (nous m\u00eame)\nwww IN  A   172.28.62.2   ; Serveur Web\ncha IN  A   172.28.33.2   ; Serveur DNS de l'AD\n</code></pre>"},{"location":"DNS/DNS%20autorit%C3%A9/#creation-du-fichier-external","title":"Cr\u00e9ation du fichier \"external\"","text":"<p>Ce fichier servira a traduire les noms de domaines en IP pour toutes les adresses externes \u00e0 notre infrastructure.  <pre><code>sudo nano /etc/bind/zones/db.chartres.sportludique.fr.external\n</code></pre></p> <pre><code>$TTL 86400\n@   IN  SOA ns1.chartres.sportludique.fr. admin.chartres.sportludique.fr. (\n        2025100701 ; Num\u00e9ros de s\u00e9rie au format YYYY/MM/DD/01\n        3600       ; Intervalle de rafra\u00eechissement\n        1800       ; Intervalle de r\u00e9essai\n        1209600    ; Intervalle d'expiration\n        86400 )    ; Dur\u00e9e minimale de cache\n\n; Serveurs de nom\n@   IN  NS  ns1.chartres.sportludique.fr.\n\n; Enregistrements\nns1 IN  A   183.44.28.1   ; Serveur DNS d'autorit\u00e9 (nous m\u00eame)\nwww IN  A   183.44.28.1   ; Serveur Web\n</code></pre> <p>(1)</p> <ol> <li>Tout les enregistrements pointent vers l'IP publique de R1 qui feras ensuite le lien avec le LAN gr\u00e2ce au PAT, la haute disponibilit\u00e9 seras impl\u00e9menter plus tard</li> </ol>"},{"location":"DNS/DNS%20autorit%C3%A9/#6-desactivation-des-13-serveurs-racines","title":"\ud83d\udd34 6. D\u00e9sactivation des 13 serveurs racines","text":"<p>Les 13 serveurs DNS racines servent \u00e0 TOUS les serveurs r\u00e9cursifs \u00e0 se diriger vers les bons serveurs DNS pour accomplir leur r\u00e9solution, nous allons les d\u00e9sactiv\u00e9es car ils rentrent en conflit avec nos views, de plus il est inutile de les avoirs \u00e9tant donn\u00e9 que ce serveur ne fait AUCUNE r\u00e9cursion. </p> <pre><code>sudo nano /etc/bind/named.conf.root-hints \n</code></pre> <p>Il suffit ensuite de mettre toutes les lignes en commentaires</p> <pre><code>// prime the server with knowledge of the root servers\n//zone \".\" {\n//      type hint;\n//      file \"/usr/share/dns/root.hints\";\n//};\n</code></pre>"},{"location":"DNS/DNS%20autorit%C3%A9/#7-tests-et-verification","title":"\u2705 7. Tests et v\u00e9rification :","text":"<p>Pour finir il ne nous reste plus qu'\u00e0 ex\u00e9cuter ces 3 commandes afin de v\u00e9rifier le bon fonctionnement de notre DNS</p>"},{"location":"DNS/DNS%20autorit%C3%A9/#fichier-de-configuration","title":"Fichier de configuration","text":"<p><pre><code>sudo named-checkconf\n</code></pre> Cette commande ne nous retourne rien si le fichier de configuration est bon</p>"},{"location":"DNS/DNS%20autorit%C3%A9/#zones","title":"Zones","text":"<pre><code>sudo named-checkzone chartres.sportludique.fr /etc/bind/zones/db.chartres.sportludique.fr.internal\nsudo named-checkzone chartres.sportludique.fr /etc/bind/zones/db.chartres.sportludique.fr.external\n</code></pre> <p>Ces deux commandes nous retourneront la valeur du num\u00e9ro de s\u00e9rie de la zone si elle est bien configur\u00e9e</p>"},{"location":"DNS/DNS%20autorit%C3%A9/#8-pare-feux-local-ufw","title":"\ud83e\uddf1 8. Pare-feux local (UFW)","text":"<p>Nous allons mettre en place un firewall local gr\u00e2ce a UFW (1) afin de bloquer toutes les connexion non necessaire au fonctionnement du DNS pour plus de s\u00e9curit\u00e9.</p> <ol> <li>Toute la documentation concernant UFW se trouve ici</li> </ol>"},{"location":"DNS/DNS%20autorit%C3%A9/#besoins","title":"Besoins","text":"<p>Apr\u00e8s avoir installer UFW (1) il nous suffit de mettre en place 3 r\u00e8gles :</p> <ol> <li> <p> Attention, l'activation d'UFW dois \u00eatre effectuer a la fin pour ne pas perdre la connexion SSH avant d'avoir mis les r\u00e8gles qui l'autorise en place.</p> </li> <li> <p>Une r\u00e8gle qui autorise les conexion SSH depuis le r\u00e9seau de management sur mon interface de management</p> </li> <li>Une r\u00e8gle qui autorise les connexions DNS en UDP sur le port 53</li> <li>Une r\u00e8gle qui autorise les connexions DNS en TCP sur le port 53</li> </ol> <p>Ces r\u00e8gles ont \u00e9t\u00e9 d\u00e9cider gr\u00e2ce a l'\u00e9tude des connexion qui auront lieu sur notre r\u00e9seau et leur sens, ces connexions sont r\u00e9pertori\u00e9es sur le sch\u00e9ma si dessous :</p> <p></p>"},{"location":"DNS/DNS%20autorit%C3%A9/#configuration","title":"Configuration","text":""},{"location":"DNS/DNS%20autorit%C3%A9/#regles-par-defaut","title":"R\u00e8gles par d\u00e9faut","text":"<p>Par defaut nous allons refuser toutes les connexion afin d'autoriser uniquement les connexion DNS par la suite.</p> <pre><code>sudo ufw default deny incoming \nsudo ufw default deny outgoing\n</code></pre>"},{"location":"DNS/DNS%20autorit%C3%A9/#regles-de-filtrage","title":"R\u00e8gles de filtrage","text":"<p>Voici donc les r\u00e8gles de filtrages a appliquer a nos interfaces : <pre><code>sudo ufw allow in on ens4 from 10.10.120.0/24 to 10.10.120.8 port 22 proto tcp\nsudo ufw allow in on ens3 from all to 172.28.62.1 port 53 proto tcp\nsudo ufw allow in on ens3 from all to 172.28.62.1 port 53 proto udp\n</code></pre></p>"},{"location":"DNS/DNS%20autorit%C3%A9/#activation-dufw","title":"Activation d'UFW","text":"<p>Une fois les r\u00e8gles qui laissent passer les trafics voulues il ne nous reste plus qu'\u00e0 activer UFW afin que nos r\u00e8gles prennent effet. <pre><code>sudo ufw enable\n</code></pre></p>"},{"location":"DocumentationMkdocs/Plugins/plugin/","title":"Documentation des plugins","text":""},{"location":"DocumentationMkdocs/Plugins/plugin/#1-drawio","title":"\u270f\ufe0f 1. Drawio","text":"<p>Drawio est un logiciel en ligne d'\u00e9dition de diagrames en tout genre, dans notre cas il sagit d'un schema r\u00e9seau, l'utilisation de ce plugin permet de g\u00e9n\u00e9rer une API html interactive utilisant les fichier en .drawio, cela nous permet un zoom et une navigation simplifier du diagrame, de plus l'utilisation de cette API d\u00e9bloque certaines fonctionnalit\u00e9 comme les fenetres r\u00e9ductibles. </p>"},{"location":"DocumentationMkdocs/Plugins/plugin/#modification-du-workflow","title":"Modification du workflow.","text":"<p>Afin de pouvoir utiliser le plugin, il faut tout dabord l'installer, nous allons donc modifier le fichier main.yml de notre github, le but \u00e9tant d'ajouter la commande qui installeras le plugin \"drawio\"</p> <pre><code>name: ci \non:\n  push:\n    branches:\n      - master \n      - main\npermissions:\n  contents: write\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Configure Git Credentials\n        run: |\n          git config user.name github-actions[bot]\n          git config user.email 41898282+github-actions[bot]@users.noreply.github.com\n      - uses: actions/setup-python@v5\n        with:\n          python-version: 3.x\n      - run: echo \"cache_id=$(date --utc '+%V')\" &gt;&gt; $GITHUB_ENV \n      - uses: actions/cache@v4\n        with:\n          key: mkdocs-material-${{ env.cache_id }}\n          path: ~/.cache \n          restore-keys: |\n            mkdocs-material-\n      - run: pip install mkdocs-material \n      - run: pip install mkdocs-drawio\n      - run: mkdocs gh-deploy --force\n</code></pre> <p>Une fois le workflow modifier, github installeras le plugin \"drawio\" a chaque mise a jour du code. </p>"},{"location":"DocumentationMkdocs/Plugins/plugin/#ajout-du-plugin-dans-le-mkdocsyml","title":"Ajout du plugin dans le mkdocs.yml","text":"<p>Il faut ensuite ajouter le plugin dans le fichier de configuration mkdocs</p> <pre><code>plugins: \n  - drawio \n</code></pre>"},{"location":"DocumentationMkdocs/Plugins/plugin/#ajout-du-fichier-drawio-dans-une-page","title":"Ajout du fichier drawio dans une page","text":"<p>Pour finir il ne reste plus qu'\u00e0 ins\u00e9rer le fichier avec l'extention \".drawio\" dans notre fichier makdown a la mani\u00e8re d'une image</p> <pre><code>![](fichier.drawio)\n</code></pre>"},{"location":"DocumentationMkdocs/Plugins/plugin/#2-search","title":"\ud83d\udd0d 2. Search","text":"<p>Search est un plugin qui permet d'ajouter une barre de recherche en haut a droite de votre page, cette barre de recherche permet de rechercher des mots, titres ou pages de votre document Mkdocs. </p>"},{"location":"DocumentationMkdocs/Plugins/plugin/#activation","title":"Activation \u26a1","text":"<p>Ce plugin \u00e9tant natif a Mkdocs, il suffit d'ajouter la ligne dans le fichier mkdocs.yml </p> <pre><code>plugins: \n  - drawio \n  - search\n</code></pre>"},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/","title":"Syntaxe et tips","text":"<p>Voici les principales commandes de syntaxe sous mkdocs avec le theme mat\u00e9rial, toute ces tips ont \u00e9t\u00e9 trouv\u00e9 sur cette page0 github.</p>"},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#1-liste-des-extension-markdown","title":"\ud83d\udcdd 1. Liste des extension Markdown","text":"<p>Voici la liste de nos extension en markdown a impl\u00e9menter dans votre fichier mkdocs.yml afin de garentir le bon fonctionnement de toutes les commandes de styntaxes. </p> <pre><code>markdown_extensions:\n  - pymdownx.emoji:\n      emoji_index: !!python/name:material.extensions.emoji.twemoji\n      emoji_generator: !!python/name:material.extensions.emoji.to_svg\n  - pymdownx.tabbed\n  - attr_list\n  - md_in_html\n  - pymdownx.superfences\n  - pymdownx.highlight\n  - pymdownx.tilde\n  - pymdownx.tasklist:\n      custom_checkbox: true\n      clickable_checkbox: true\n</code></pre>"},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#2-les-commandes-principales","title":"\u2328\ufe0f 2. Les commandes principales","text":""},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#syntaxe","title":"Syntaxe","text":"<p>Gras : <pre><code>**texte**\n</code></pre></p> <p>Italique : <pre><code>*texte*\n</code></pre></p> <p>Barr\u00e9 : <pre><code>~~texte~~\n</code></pre> Souligner :  <pre><code>&lt;ins&gt; \ntexte \n&lt;/ins&gt;\n</code></pre></p>"},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#mise-en-forme","title":"Mise en forme","text":"<p>Code inline : <pre><code>`code`\n</code></pre> Citation </p> <p>Ceci est une sitation :  <pre><code>&gt; Texte\n</code></pre></p> <p>Bloc de code : <pre><code>\"```\"\nton code ici\n\"```\"\n</code></pre>  indice : <sub>indice </sub> <pre><code>&lt;sub&gt;\nindice\n&lt;/sub&gt;\n</code></pre> Exposant : <sup> Exposant </sup> <pre><code>&lt;sup&gt;\nexposant \n&lt;/sup&gt;\n</code></pre></p> <p>\"#\" Titre Principale </p> <p>\"##\" Sous titre 1</p> <p>\"###\" Sous titre 2</p> <p>\"####\" Sous titre 3 </p>"},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#outils","title":"Outils","text":""},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#liens-externe-google","title":"Liens externe google","text":"<pre><code>[texte du lien](http://ceciestunlien)\n</code></pre>"},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#images","title":"Images","text":"<p><pre><code>![texte de l'image](lien vers l'image)\n</code></pre> Voici le moyen d'ordonner vos liens :  <pre><code>Context Lien relatif\nDans un fichier .md sur la m\u00eame branche /assets/images/electrocat.png\nDans un fichier .md sur une autre branche   /../main/assets/images/electrocat.png\nDans les probl\u00e8mes, les demandes de tirage et les commentaires du d\u00e9p\u00f4t ../blob/main/assets/images/electrocat.png?raw=true\nDans un fichier .md dans un autre d\u00e9p\u00f4t /../../../../github/docs/blob/main/assets/images/electrocat.png\nDans les probl\u00e8mes, les demandes de tirage et les commentaires d\u2019un autre d\u00e9p\u00f4t ../../../github/docs/blob/main/assets/images/electrocat.png?raw=true\n</code></pre></p>"},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#listes","title":"Listes","text":"<pre><code>-Premier \u00e9l\u00e9ment \n-Deuxi\u00e8me element\n-Troisi\u00e8me \u00e9l\u00e9ment\n\n1. James Madison\n2. James Monroe\n3. John Quincy Adams\n</code></pre> <ol> <li>Ceci est une annotation</li> </ol> <p><pre><code>&lt;div class=\"annotate\" markdown&gt;\n\nPhrase avant l'annotation (1) phrase apr\u00e8s l'annotation\n\n&lt;/div&gt;\n1. Contenue de l'annotation\n</code></pre> Il est possible de modifier l'icone de l'annotation en ajoutant l'icone dans le mkdocs.yml  <pre><code>theme :\n  logo : logo.png\n  icon : material/chevron-right-circle\n  name : material\n  language : fr\n  palette:\n    - scheme: default\n      primary: red\n      accent: white\n      toggle:\n        icon: material/weather-night\n        name: Switch to dark mode\n    - scheme: slate\n      primary: red\n      accent: white\n      toggle:\n        icon: material/weather-sunny\n        name: Switch to light mode\n</code></pre></p> <p>Il est possbile de diff\u00e9rencier les annotation et d'en mettre plusieurs \u00e0 la suite, il suffit de changer le num\u00e9ro associ\u00e9.</p> <ol> <li>mettre un \"x\" entre les crochet marque la t\u00e2che comme faite</li> </ol> <pre><code>- [x] #739\n- [ ] https://github.com/octo-org/octo-repo/issues/740\n- [ ] Add delight to the experience when all tasks are complete :tada:\n</code></pre> <ul> <li> TACHE ACOMPLIE</li> <li> TACHE A ACOMPLIRE</li> </ul> <ol> <li>Liste compl\u00e8te des emoji utilisables en markdown ici.</li> </ol>"},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#anotation","title":"Anotation","text":"<p>(1)</p>"},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#liste-de-taches","title":"Liste de taches","text":"<p>(1)</p>"},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#emoji","title":"Emoji","text":"<p>(1) <pre><code>:EMOJICODE:\n</code></pre></p>"},{"location":"DocumentationMkdocs/Syntaxe/Syntaxe/#surligner","title":"Surligner","text":"<p>Il est possible sur surligner des lignes de codes dans un bloc de code, il suffit d'ajouter  <pre><code>python hl_lines=\"0\"\n</code></pre> Juste apr\u00e8s \"```\" la ou 0 repr\u00e9sente le num\u00e9ro de ligne.  <pre><code>Dans mon exemple \nla 4 \u00e8me ligne\nseras surligner\ncelle la\n</code></pre></p>"},{"location":"Hyperviseur/lacp-proxmox/","title":"Documentation : Configuration LACP et Trunk via l\u2019interface Web Proxmox VE","text":""},{"location":"Hyperviseur/lacp-proxmox/#objectif","title":"\ud83c\udfaf Objectif","text":"<p>Mettre en place une configuration de liens agr\u00e9g\u00e9s (LACP) et de trunks VLAN sur Proxmox VE et le switch hyperviseur, afin d\u2019assurer la haute disponibilit\u00e9 et la segmentation r\u00e9seau via VLANs.</p>"},{"location":"Hyperviseur/lacp-proxmox/#1-configuration-sur-proxmox-ve-interface-web","title":"\ud83d\udd27 1. Configuration sur Proxmox VE (Interface Web)","text":""},{"location":"Hyperviseur/lacp-proxmox/#creation-du-bond-lacp","title":"Cr\u00e9ation du Bond LACP","text":"<ol> <li>Connectez-vous \u00e0 l\u2019interface web de Proxmox VE.</li> <li>Allez dans Datacenter \u2192 Node \u2192 System \u2192 Network.</li> <li>Cliquez sur Create \u2192 Linux Bond.</li> <li>Param\u00e9trez le bond comme suit :<ul> <li>Name : <code>bond0</code></li> <li>Slaves : s\u00e9lectionnez les interfaces (ex : <code>eno1</code>, <code>ens3f0</code>, <code>ens3f1</code>) </li> <li>Mode : <code>802.3ad (LACP)</code></li> <li>Transmit Hash Policy : <code>layer2+3</code> </li> </ul> </li> <li>Cliquez sur Create pour valider.</li> </ol> <p>\u26a0\ufe0f Ne mettre aucune IP ni Gateway sur le Linux Bond</p>"},{"location":"Hyperviseur/lacp-proxmox/#attribution-de-lip-au-bond-via-un-linux-bridge","title":"Attribution de l\u2019IP au bond via un Linux Bridge","text":"<ol> <li>Toujours dans l\u2019onglet Network, cliquez sur Create \u2192 Linux Bridge.</li> <li> <p>Param\u00e9trez le bridge pour utiliser le bond comme port physique :</p> <ul> <li>Name : <code>vmbr2</code></li> <li>Bridge ports : <code>bond0</code></li> <li>Manage Vlan's : <code>On</code></li> <li>STP : <code>Off</code></li> <li>IP Address : <code>172.28.33.4/24</code></li> <li>Gateway (IPv4) : <code>172.28.33.254</code></li> <li>Vlan ID : <code>221-229</code></li> </ul> </li> <li> <p>Cliquez sur Create pour appliquer le bridge.</p> </li> </ol> <p>Le bridge <code>vmbr2</code> permet \u00e0 vos VM de se connecter au r\u00e9seau via le bond LACP.</p>"},{"location":"Hyperviseur/lacp-proxmox/#vlans-sur-le-bridge","title":"VLANs sur le bridge","text":"<p>Contraites VLANs with Trunk :</p> <ul> <li>VLAN serveur : VLAN 221</li> <li>VLANs suppl\u00e9mentaires : 222 \u00e0 229 si n\u00e9cessaire.</li> </ul> <p>Cette configuration permet de g\u00e9rer les VLANs directement sur le bridge et d\u2019avoir des VM ou containers connect\u00e9s aux VLANs via le bridge.</p>"},{"location":"Hyperviseur/lacp-proxmox/#2-configuration-sur-le-switch-hyperviseur","title":"\ud83d\udd27 2. Configuration sur le Switch Hyperviseur","text":""},{"location":"Hyperviseur/lacp-proxmox/#creation-du-port-channel-lacp","title":"Cr\u00e9ation du Port-Channel (LACP)","text":"<ol> <li>S\u00e9lectionnez les ports connect\u00e9s \u00e0 l\u2019hyperviseur.</li> <li>Cr\u00e9ez un Port-Channel et activez LACP.</li> </ol> <p>Configuration Cisco :</p> <pre><code>interface range GigabitEthernet1/0/21-23\n    channel-group 2 mode active\n    switchport mode trunk\n</code></pre> <ul> <li>channel-group 2 mode active : active LACP.</li> <li>switchport mode trunk : configure le trunk.</li> </ul>"},{"location":"Hyperviseur/lacp-proxmox/#configuration-des-vlans-sur-le-trunk","title":"Configuration des VLANs sur le trunk","text":"<p>VLANs autoris\u00e9s sur le trunk : 221 \u00e0 229</p> <p>Configuration Cisco :</p> <pre><code>interface Port-channel2\n    switchport trunk allowed vlan 221-229\n</code></pre>"},{"location":"Hyperviseur/lacp-proxmox/#3-verifications","title":"\u2705 3. V\u00e9rifications","text":""},{"location":"Hyperviseur/lacp-proxmox/#sur-proxmox-ve","title":"Sur Proxmox VE","text":"<p>a) V\u00e9rifiez que le bond fonctionne :</p> <ul> <li>Datacenter \u2192 Node \u2192 System \u2192 Network \u2192 bond0</li> <li>V\u00e9rifiez les VLANs sur le bridge :</li> <li>Datacenter \u2192 Node \u2192 System \u2192 Network \u2192 vmbr2 \u2192 VLANs</li> </ul> <p>b) Test de connectivit\u00e9 :</p> <ul> <li>Ping depuis l\u2019hyperviseur vers la passerelle : ping 172.28.33.254</li> <li>Ping vers d\u2019autres VLANs si configur\u00e9s</li> </ul>"},{"location":"Hyperviseur/lacp-proxmox/#sur-le-switch","title":"Sur le Switch","text":"<pre><code>show etherchannel summary\nshow vlan brief\nshow interfaces trunk\n</code></pre> <ul> <li>V\u00e9rifier que le port-channel est actif et les VLANs correctement propag\u00e9s.</li> </ul>"},{"location":"Hyperviseur/ldaps-prox/","title":"Mise en place du Protocole LDAPS sur Proxmox.","text":""},{"location":"Hyperviseur/ldaps-prox/#objectif","title":"\ud83c\udfaf Objectif","text":"<p>Configurer une authentification Active Directory s\u00e9curis\u00e9e (LDAPS) sur un cluster Proxmox, \u00e0 l\u2019aide d\u2019un certificat g\u00e9n\u00e9r\u00e9 par le service ADCS (Active Directory Certificate Services), et assurer la communication s\u00e9curis\u00e9e entre le serveur Proxmox et les contr\u00f4leurs de domaine.</p>"},{"location":"Hyperviseur/ldaps-prox/#1-creation-dun-dossier-partage-pour-les-certificats","title":"\ud83d\udcc1 1. Cr\u00e9ation d\u2019un dossier partag\u00e9 pour les certificats.","text":"<p>Sur le contr\u00f4leur de domaine principal (AD principal), cr\u00e9er un dossier partag\u00e9 qui servira \u00e0 stocker le certificat g\u00e9n\u00e9r\u00e9 par le service ADCS : <pre><code>C:\\Backup\\Certificat\n</code></pre></p>"},{"location":"Hyperviseur/ldaps-prox/#2-generation-et-exportation-du-certificat-via-adcs","title":"\ud83d\udce4 2. G\u00e9n\u00e9ration et exportation du certificat via ADCS.","text":"<ul> <li>Installer le r\u00f4le ADCS (Active Directory Certificate Services) sur le contr\u00f4leur de domaine secondaire.</li> <li>G\u00e9n\u00e9rer un certificat pour le serveur LDAP s\u00e9curis\u00e9 (LDAPS).</li> <li>Exporter le certificat au format .crt (ou .cer).</li> <li>Copier ce fichier dans le dossier partag\u00e9 cr\u00e9\u00e9 pr\u00e9c\u00e9demment.</li> </ul> <pre><code>\\\\CHA-DC-01\\Backup\\Certificat\\certificat.crt\n</code></pre> <p>Pour toutes ces \u00e9tapes voir : Tuto ADCS et Certificat</p>"},{"location":"Hyperviseur/ldaps-prox/#3-transfert-du-certificat-vers-le-serveur-proxmox","title":"\ud83d\udd00 3. Transfert du certificat vers le serveur Proxmox.","text":"<p>Sur le poste o\u00f9 se trouve le certificat, ex\u00e9cuter la commande suivante pour le transf\u00e9rer sur le serveur Proxmox : <pre><code>scp Documents/certificat.crt root@10.10.120.50:/usr/local/share/ca-certificates\n</code></pre></p> <p>\ud83d\udca1 10.10.120.50 correspond \u00e0 l\u2019adresse IP du serveur Proxmox.</p>"},{"location":"Hyperviseur/ldaps-prox/#4-installation-du-certificat-sur-proxmox","title":"\ud83d\udce6 4. Installation du certificat sur Proxmox","text":"<p>Connectez-vous au serveur Proxmox via SSH, puis ex\u00e9cutez : <pre><code>cd /usr/local/share/ca-certificates\nls\nupdate-ca-certificates\n</code></pre></p> <p>\ud83d\udca1 Cette commande mettra \u00e0 jour la base des autorit\u00e9s de certification de Proxmox pour reconna\u00eetre le certificat ADCS comme fiable.</p>"},{"location":"Hyperviseur/ldaps-prox/#5-normalisation-du-nom-du-serveur-active-directory","title":"\ud83d\udda5\ufe0f 5. Normalisation du nom du serveur Active Directory.","text":"<p>Proxmox n\u2019accepte pas les caract\u00e8res \u201c_\u201d (underscore) dans les noms de serveurs. <pre><code>Ancien nom : CHA_DC_01\nNouveau nom : CHA-DC-01\n</code></pre></p> <p>Ce changement permet une compatibilit\u00e9 totale avec Proxmox et le protocole LDAPS.</p>"},{"location":"Hyperviseur/ldaps-prox/#6-utilisation-du-fqdn-nom-de-domaine-complet","title":"\ud83d\udda5\ufe0f 6. Utilisation du FQDN (Nom de domaine complet).","text":"<p>Le nom complet (FQDN) du serveur Active Directory principal est : <pre><code>CHA-DC-01.cha.chartres.sportludique.fr\n</code></pre></p> <p>C\u2019est ce FQDN qui sera utilis\u00e9 comme identifiant de serveur AD dans la configuration de Proxmox et non l'ip du serveur.</p>"},{"location":"Hyperviseur/ldaps-prox/#7-configuration-du-realm-royaume-dans-proxmox","title":"\ud83d\udd27 7. Configuration du Realm (Royaume) dans Proxmox.","text":"<p>Chemin d\u2019acc\u00e8s :</p> <pre><code>Datacenter \u2192 Permissions \u2192 Realms \u2192 Add \u2192 Active Directory\n</code></pre> Champ Valeur Realm ad Default Domain cha.chartres.sportludique.fr Port 636 Mode LDAPS Server1 CHA-DC-01.cha.chartres.sportludique.fr Server2 10.10.120.3 (serveur secondaire AD) V\u00e9rifier le certificat \u2705 Oui Commentaire Authentification AD <p>\ud83e\udde9 Le port 636 correspond au protocole LDAPS (LDAP s\u00e9curis\u00e9 via SSL/TLS).</p>"},{"location":"Hyperviseur/proxmox-raid/","title":"Configuration de Proxmox VE &amp; RAID","text":""},{"location":"Hyperviseur/proxmox-raid/#1-proxmox-ve","title":"\u2699\ufe0f 1. Proxmox VE","text":""},{"location":"Hyperviseur/proxmox-raid/#installation","title":"Installation","text":"<ul> <li>Mise en place de Proxmox VE sur le serveur physique.</li> <li>D\u00e9finition d\u2019un mot de passe administrateur avec l'utilisateur par d\u00e9faut root pour acc\u00e9der \u00e0 l\u2019interface web et \u00e0 l\u2019OS.</li> </ul>"},{"location":"Hyperviseur/proxmox-raid/#configuration-de-lhyperviseur","title":"Configuration de l\u2019hyperviseur","text":"<ul> <li> <p>Attribution d\u2019un nom d\u2019h\u00f4te :   <code>cha.chartres.sportludiques.fr</code></p> </li> <li> <p>Association des VLAN :</p> </li> <li>VLAN Mana : <code>120</code> \u2192 acc\u00e8s \u00e0 l\u2019interface web d\u2019administration.<ul> <li>Adresse IP du Mana : <code>10.10.120.50</code></li> </ul> </li> <li>VLAN Serveur : <code>221</code> \u2192 configuration car l\u2019hyperviseur est utilis\u00e9 en tant que serveur.<ul> <li>Adresse IP du Serveur : <code>172.28.33.4</code></li> </ul> </li> </ul>"},{"location":"Hyperviseur/proxmox-raid/#2-raid-10","title":"\u2699\ufe0f 2. RAID 1+0","text":""},{"location":"Hyperviseur/proxmox-raid/#contrainte-materielle","title":"Contrainte mat\u00e9rielle","text":"<p>Le serveur (g\u00e9n\u00e9ration 8) ne prend en charge que les niveaux de RAID suivants : * RAID 0 * RAID 1 * RAID 1+0</p>"},{"location":"Hyperviseur/proxmox-raid/#choix-effectue","title":"Choix effectu\u00e9","text":"<ul> <li>Mise en place d\u2019un RAID 1+0 (au lieu du RAID 5 initialement pr\u00e9vu).</li> <li>Cons\u00e9quence : perte de 50 % de la capacit\u00e9 totale de stockage, mais gain en fiabilit\u00e9 et en performances en lecture/\u00e9criture.</li> </ul>"},{"location":"Hyperviseur/vlan-prox/","title":"Configuration des VLAN et Zones dans la SDN","text":""},{"location":"Hyperviseur/vlan-prox/#1-contexte","title":"\ud83d\udcdd 1. Contexte","text":"<p>Cette proc\u00e9dure d\u00e9crit la configuration des VLAN et Zones au sein de la SDN (Software Defined Network) utilis\u00e9e dans l\u2019infrastructure. L\u2019objectif est de structurer le r\u00e9seau en diff\u00e9rentes zones logiques et de garantir une gestion coh\u00e9rente des interfaces et des connexions entre les machines virtuelles.</p>"},{"location":"Hyperviseur/vlan-prox/#2-creation-de-la-zone-service","title":"\u2795 2. Cr\u00e9ation de la Zone \u201cService\u201d","text":"<ol> <li>Acc\u00e9der \u00e0 la console de gestion SDN sur l'interface Web de Proxmox.</li> <li>Cr\u00e9er une nouvelle zone nomm\u00e9e : <code>Service</code> </li> <li>Cette zone sera utilis\u00e9e pour l\u2019ensemble des VLAN list\u00e9s ci-dessous.</li> </ol>"},{"location":"Hyperviseur/vlan-prox/#3-creation-des-vlan-dans-les-vnets","title":"\u2795 3. Cr\u00e9ation des VLAN dans les Vnets","text":""},{"location":"Hyperviseur/vlan-prox/#vlan-concernes","title":"VLAN concern\u00e9s","text":"Nom du VLAN ID VLAN Zone associ\u00e9e Gestion Actif 222 Service Client 224 Service DMZ 226 Service Serveur 221 Service"},{"location":"Hyperviseur/vlan-prox/#etapes-de-creation","title":"\u00c9tapes de cr\u00e9ation","text":"<ol> <li>Dans la section Vnets, cr\u00e9er un VLAN pour chaque identifiant mentionn\u00e9 ci-dessus.  </li> <li>Affecter \u00e0 chaque VLAN :<ul> <li>Un nom explicite (ex. : <code>VLAN_GestionActif</code>, <code>VLAN_Client</code>, etc.).  </li> <li>La zone \u201cService\u201d.  </li> </ul> </li> <li>Ne pas cocher :<ul> <li>Gestion des VLANs </li> <li>Pare-feu </li> </ul> </li> <li>Ne pas ajouter d\u2019\u00e9tiquette VLAN (VLAN Tag) lors de la configuration.</li> </ol>"},{"location":"Hyperviseur/vlan-prox/#4-association-des-vlan-aux-machines-virtuelles-vm","title":"\ud83d\udd17 4. Association des VLAN aux Machines Virtuelles (VM)","text":"<p>Lors de la cr\u00e9ation d\u2019une nouvelle VM :</p> <ol> <li>Dans les param\u00e8tres de la carte r\u00e9seau de la VM, section Pont (Bridge) :<ul> <li>S\u00e9lectionner la Zone \u201cService\u201d.  </li> </ul> </li> <li>Ne pas cocher :<ul> <li>Gestion des VLANs </li> <li>Pare-feu </li> </ul> </li> <li>Ne pas renseigner de Tag VLAN.  </li> </ol>"},{"location":"Hyperviseur/vlan-prox/#5-probleme-de-detection-de-la-carte-reseau","title":"\ud83d\udd34 5. Probl\u00e8me de d\u00e9tection de la carte r\u00e9seau","text":"<p>Si, apr\u00e8s la cr\u00e9ation de la VM, la carte r\u00e9seau n\u2019appara\u00eet pas dans l\u2019invite de commande (CMD) de la VM :</p> <ol> <li>Ouvrir les param\u00e8tres de la VM sur Proxmox.  </li> <li>Aller dans Mat\u00e9riel \u2192 Carte R\u00e9seau \u2192 Mod\u00e8le.  </li> <li>Changer le mod\u00e8le de la carte r\u00e9seau en Intel E1000.  </li> <li>Red\u00e9marrer la VM si n\u00e9cessaire.  </li> </ol>"},{"location":"Hyperviseur/vlan-prox/#6-vlan-independant","title":"\ud83d\udda7 6. VLAN ind\u00e9pendant","text":"<p>Le VLAN 120 (Management) est ind\u00e9pendant de la zone Service et de la SDN. Il dispose d\u2019une interface r\u00e9seau d\u00e9di\u00e9e : - Interface : <code>vmbr0</code> - Adresse IP : <code>10.10.120.50/24</code> </p>"},{"location":"Hyperviseur/vlan-prox/#cas-dutilisation","title":"Cas d\u2019utilisation","text":"<p>Si une VM doit disposer d\u2019un acc\u00e8s au VLAN Management :</p> <ol> <li>Ajouter une seconde carte r\u00e9seau \u00e0 la VM.  </li> <li>Dans la rubrique Pont (Bridge), s\u00e9lectionner <code>vmbr0</code>.  </li> <li>Ne pas cocher :<ul> <li>Gestion des VLANs </li> <li>Pare-feu </li> </ul> </li> <li>Ne pas mettre d\u2019\u00e9tiquette VLAN.  </li> </ol>"},{"location":"Hyperviseur/vlan-prox/#7-resume-rapide","title":"\ud83d\udccc 7. R\u00e9sum\u00e9 rapide","text":"\u00c9l\u00e9ment Param\u00e8tre / Valeur Zone principale Service VLANs utilis\u00e9s 221, 222, 224, 226 VLAN Management 120 (ind\u00e9pendant) Interface Management vmbr0 \u2013 IP : 10.10.120.50/24 Mod\u00e8le de carte r\u00e9seau Intel E1000 Options \u00e0 ne pas activer Gestion des VLANs / Pare-feu / Tag VLAN"},{"location":"Pare-feux/UFW/","title":"UFW","text":"<p>Cette documentation donne les commandes basiques et l'installation d'UFW (Uncomplicated Fire Wall)</p> <p>UFW (Uncomplicated Firewall) est un pare-feu simple pour Linux, bas\u00e9 sur iptables. Il sert \u00e0 contr\u00f4ler le trafic r\u00e9seau entrant et sortant gr\u00e2ce \u00e0 des r\u00e8gles faciles \u00e0 g\u00e9rer.</p> <p>Points cl\u00e9s :</p> <ul> <li> <p>Facile \u00e0 utiliser : commandes simples (allow, deny, status).</p> </li> <li> <p>Filtrage par port, protocole et IP.</p> </li> <li> <p>Gestion des interfaces multiples.</p> </li> <li> <p>R\u00e8gles persistantes et journalisation.</p> </li> <li> <p>Objectif : s\u00e9curiser un serveur ou un r\u00e9seau en autorisant uniquement le trafic n\u00e9cessaire.</p> </li> </ul>"},{"location":"Pare-feux/UFW/#1-instalation","title":"\ud83d\udce6 1. Instalation","text":"<p>Mettez a jour votre syst\u00e8me <pre><code>sudo apt update \nsudo apt upgrade\n</code></pre></p> <p>Installez UFW  <pre><code>sudo apt install ufw -y\n</code></pre></p>"},{"location":"Pare-feux/UFW/#2-configuration-basique","title":"\ud83d\udd27 2. Configuration basique","text":"<p>Voici les commandes basiques d'UFW :</p>"},{"location":"Pare-feux/UFW/#activation-desactivation","title":"Activation/ D\u00e9sactivation","text":"<p>UFW comme tout les pare-feux peut \u00eatre activer ou d\u00e9sactiver, lors de son instalation il est d\u00e9sactiver par default <pre><code>sudo ufw enable     #active le pare-feux\nsudo ufw disable    #d\u00e9sactive le pare-feux\nsudo ufw status     #Donne l'\u00e9tat du pare-feux (actif/inactif)\n</code></pre></p>"},{"location":"Pare-feux/UFW/#regles-par-defaut","title":"R\u00e8gles par d\u00e9faut","text":"<p>UFW compte 4 r\u00e8gles de filtrage par default qui servent a tout bloquer/autoriser sur le trafic entrant ou sortant : <pre><code>sudo ufw default deny incoming   # Bloque tout le trafic entrant par d\u00e9faut\nsudo ufw default allow incoming  # Autorise tout le trafic entrant par d\u00e9faut\nsudo ufw default allow outgoing  # Autorise tout le trafic sortant par d\u00e9faut\nsudo ufw default deny outgoing   # Bloque tout le trafic sortant (si serveur tr\u00e8s s\u00e9curis\u00e9)\n</code></pre></p>"},{"location":"Pare-feux/UFW/#regles-filtrantes","title":"R\u00e8gles filtrantes","text":"<p>Chaque r\u00e8gle prend en compte plusieurs param\u00e8tres, autoriser, refuser, le port, l'IP... </p> <p>Voici une commande type d'UFW </p> <p><pre><code>sudo ufw &lt;allow/deny&gt; &lt;in/out&gt; on &lt;interface&gt; from &lt;all/ip/r\u00e9seau&gt; to &lt;all/ip/r\u00e9seau&gt; port &lt;n\u00b0de port&gt; proto &lt;protocole ip&gt;\n</code></pre> Chaque r\u00e8gle peut \u00eatre adapt\u00e9 en fonction des besoins. </p>"},{"location":"Pare-feux/opnsense/","title":"Installation et Configuration d\u2019OPNsense sur Nutanix","text":""},{"location":"Pare-feux/opnsense/#1-installation","title":"\ud83d\udce6 1. Installation","text":""},{"location":"Pare-feux/opnsense/#deploiement-de-la-vm","title":"D\u00e9ploiement de la VM","text":"<ul> <li>Cr\u00e9ation d\u2019une VM OPNsense sur Nutanix.</li> <li> <p>Ressources attribu\u00e9es :</p> </li> <li> <p>Stockage : 50 Go</p> </li> <li>RAM : 8 Go</li> <li>vCPU : 2</li> </ul>"},{"location":"Pare-feux/opnsense/#reseau-et-vlan","title":"R\u00e9seau et VLAN","text":"<ul> <li>Association de 3 VLAN :</li> <li>VLAN Management : <code>120</code></li> <li>VLAN DMZ : <code>226</code></li> <li> <p>VLAN LAN2DMZ : <code>223</code></p> </li> <li> <p>Attribution d\u2019une adresse IP de management (10.10.120.70) dans le VLAN 120 pour acc\u00e9der \u00e0 l\u2019interface web et administrer le pare-feu.</p> </li> </ul>"},{"location":"Pare-feux/opnsense/#2-configuration","title":"\ud83d\udd27 2. Configuration","text":""},{"location":"Pare-feux/opnsense/#acces-web-comptes","title":"Acc\u00e8s Web &amp; comptes","text":"<ul> <li>Utilisateur administrateur : <code>root</code> (nom d\u2019utilisateur v\u00e9rifi\u00e9).  </li> <li>Mot de passe : mot de passe initial remplac\u00e9 \u2014 un mot de passe administrateur personnalis\u00e9 a \u00e9t\u00e9 d\u00e9fini pour l\u2019acc\u00e8s \u00e0 l\u2019interface web.  </li> <li>Recommandation : stocker les identifiants de mani\u00e8re s\u00e9curis\u00e9e (gestionnaire de mots de passe).</li> </ul>"},{"location":"Pare-feux/opnsense/#interfaces","title":"Interfaces","text":"<ul> <li>Activation des interfaces DMZ et LAN2DMZ.</li> <li> <p>Attribution d\u2019une adresse IP et d\u2019une passerelle \u00e0 chacune : </p> <ul> <li>DMZ : <ul> <li>Adresse IP : 172.28.62.253 </li> <li>Gateway : 172.28.62.254</li> </ul> </li> <li>LAN2DMZ : <ul> <li>Adresse IP : 172.28.63.140</li> <li>Gateway : 172.28.63.254</li> </ul> </li> </ul> </li> </ul>"},{"location":"Pare-feux/opnsense/#regles-de-pare-feu","title":"R\u00e8gles de Pare-feu","text":"<ul> <li> <p>Mise en place temporaire d\u2019une r\u00e8gle permissive :</p> </li> <li> <p>Allow All / Any (autorisation de toutes les trames, y compris ICMP/ping).</p> </li> <li>Objectif : tester le bon fonctionnement initial du pare-feu.</li> <li>Des r\u00e8gles de filtrage plus restrictives seront appliqu\u00e9es ult\u00e9rieurement.</li> </ul>"},{"location":"Pare-feux/opnsense/#routage","title":"Routage","text":"<ul> <li> <p>Configuration des routes aller/retour.</p> <ul> <li>Adresse IP : 172.28.35.0/24 | Gateway : 172.28.63.130 (SWCORE) </li> <li>Adresse IP : 172.28.32.0/24 | Gateway : 172.28.63.130 (SWCORE) </li> <li>Adresse IP : 172.28.33.0/24 | Gateway : 172.28.63.130 (SWCORE)  </li> </ul> </li> </ul>"},{"location":"Pare-feux/stormshield/","title":"Configuration du Pare Feu Stormshield","text":""},{"location":"Pare-feux/stormshield/#1reset-du-pare-feu","title":"\ud83d\udd04 1.Reset du pare feu","text":"<p>Sur les bo\u00eetiers physiques: un appui sur le bouton reset (attendre que les led devant clignotent) pour les bo\u00eetiers physiques permet de restaurer la configuration d'usine et red\u00e9marrer en bridge sur toutes les interfaces.</p>"},{"location":"Pare-feux/stormshield/#schema-du-pare-feu-apres-reset","title":"Schema du pare feu apr\u00e8s reset","text":""},{"location":"Pare-feux/stormshield/#2connexion-apres-reset","title":"\ud83d\udda5\ufe0f 2.Connexion apr\u00e8s reset","text":"<p>Pour configurer le pare-feu, il faut se brancher sur l'interface IN et mettre son poste en DHCP.</p> <p>En configuration usine sur un bo\u00eetier physique, toutes les interfaces sont incluses dans un bridge dont l'adresse est 10.0.0.254/8.Un serveur DHCP est actif sur toutes les interfaces du bridge et il distribue des adresses IP comprises entre 10.0.0.10 et 10.0.0.100. L'acc\u00e8s \u00e0 l'interface web de configuration du pare-feu se fait avec l'url : https://10.0.0.254/admin.</p> <p>Par d\u00e9faut, seul le compte syst\u00e8me admin (mot de passe par d\u00e9faut admin), disposant de tous les privil\u00e8ges sur le bo\u00eetier.</p> <p></p>"},{"location":"Pare-feux/stormshield/#3configuration-generale","title":"\ud83d\udd27 3.Configuration g\u00e9n\u00e9rale","text":""},{"location":"Pare-feux/stormshield/#modification-du-mot-de-passe-de-ladministrateur","title":"Modification du mot de passe de l'administrateur","text":"<p>La modification du mot de passe admin se fait dans le menu Configuration/Syst\u00e8me/Administrateurs puis onglet Compte ADMIN.</p> <p></p> <p>Puis cliquer sur Appliquer.</p>"},{"location":"Pare-feux/stormshield/#nom","title":"Nom","text":"<p>S\u00e9lectionner dans le menu \u00e0 gauche Configuration / Syst\u00e8me puis Configuration G\u00e9n\u00e9rale.</p> <p>Commencer par donner un nom \u00e0 votre bo\u00eetier et changer la langue de la console.</p> <p></p> <p>Puis cliquer sur Appliquer.</p>"},{"location":"Pare-feux/stormshield/#fuseau-horaire","title":"Fuseau horaire","text":"<p>La zone \u00ab Param\u00e8tres de date et d'heure \u00bb permet de modifier le fuseau horaire dans la zone Fuseau horaire, s\u00e9lectionnez Europe/Paris.</p> <p></p> <p>Apr\u00e8s le red\u00e9marrage (au bout d'environ 3 minutes), revenir au menu Configuration / Syst\u00e8me puis Configuration et dans la zone Param\u00e8tres de date et d'heure cliquer sur Maintenir le pare-feu \u00e0 l'heure (NTP) pour que les mises \u00e0 jour d'heure d'\u00e9t\u00e9/heure d'hiver soient \u00e9galement effectives.</p> <p>Puis cliquer sur Appliquer.</p>"},{"location":"Pare-feux/stormshield/#4configuration-du-reseau","title":"\ud83d\udd27 4.Configuration du r\u00e9seau","text":"<p>Toute les interfaces sont dans le bridge.</p> <p></p> <p>Choisir une interface (par exemple IN), pour la sortir du bridge et la configurer avec une IP fixe.</p> <p></p> <p>Puis cliquer sur Appliquer.</p> <p>Faire pareil avec les autres interfaces (WAN,DMZ).</p> <p></p>"},{"location":"Pare-feux/stormshield/#5routage","title":"\ud83d\udee3\ufe0f 5.Routage","text":""},{"location":"Pare-feux/stormshield/#route-par-defaut","title":"Route par d\u00e9faut","text":"<p>Cliquer Configuration / R\u00e9seau / Routage / Routes statiques IPv4.</p> <p></p> <p>Cliquer sur l'ic\u00f4ne  pour ajouter un objet r\u00e9seau, choisir Machine et renseigner les champs Nom et Adresse IPv4 du pare-feu puis cliquer sur le bouton Cr\u00e9er.</p> <p></p> <p>Puis cliquer sur Appliquer.</p>"},{"location":"Pare-feux/stormshield/#route-de-retour","title":"Route de retour","text":""},{"location":"Pare-feux/stormshield/#6filtrage","title":"\ud83e\uddf1 6.Filtrage","text":"<p>Allez dans Configuration / Politique de s\u00e9curit\u00e9 / Filtrage et NAT.</p> <p>Choisir la r\u00e9gle \"Pass all\" et modifier la colonne \"Inspection de s\u00e9curit\u00e9\" en mettant \"Ne pas inspecter\".</p> <p></p> <p></p> <p>Puis cliquer sur Appliquer.</p>"},{"location":"Routeur/PAT/","title":"Documentation PAT pour DNS avec une seule IP publique","text":"<p>Objectif : Permettre l\u2019acc\u00e8s depuis Internet aux deux serveurs DNS via une seule IP publique, en utilisant des ports externes diff\u00e9rents pour le r\u00e9solveur.</p>"},{"location":"Routeur/PAT/#1-configurer-le-pat","title":"\ud83d\udd27 1. Configurer le PAT","text":"<p>Le DNS utilise le port standard 53 pour TCP et UDP. Le trafic provenant d\u2019Internet sur le port 53 sera redirig\u00e9 vers le serveur.</p>"},{"location":"Routeur/PAT/#configuration-r1","title":"Configuration R1","text":"<pre><code>ip nat inside source static tcp 172.28.62.1 53 183.44.28.1 53\nip nat inside source static udp 172.28.62.1 53 183.44.28.1 53\n</code></pre>"},{"location":"Routeur/PAT/#configuration-r2","title":"Configuration R2","text":"<pre><code>ip nat inside source static tcp 172.28.62.1 53 221.87.128.2 53\nip nat inside source static udp 172.28.62.1 53 221.87.128.2 53\n</code></pre> <p>Explication :</p> <p>Tcp et udp : on ouvre les deux protocoles utilis\u00e9s par DNS.</p> <ul> <li>172.28.62.1 53 : IP et port interne du DNS autoritaire.</li> <li>183.44.28.1 53 : IP publique et port externe visible depuis Internet sur le R1</li> <li>221.87.128.1 53 : IP publique et port externe visible depuis Internet sur le R2</li> </ul>"},{"location":"Routeur/PAT/#2-verification","title":"\u2705 2. V\u00e9rification","text":"<p>V\u00e9rifier que NAT est bien configur\u00e9 : <pre><code>show ip nat translations\n</code></pre></p>"},{"location":"Routeur/hsrp/","title":"FailOver avec le Protocole HSRP","text":"<p>Voici une pr\u00e9sentation rapide du protocole HSRP avec des exemples de configuration utilisant des adresses IP de la plage 172.28.63.0/24, avec une adresse VIP (Virtual IP) de 172.28.63.254 :</p> <p>Supposons que vous ayez deux routeurs Cisco, R1 et R2, et que vous souhaitiez configurer HSRP entre eux pour la haute disponibilit\u00e9.</p>"},{"location":"Routeur/hsrp/#1-configuration-de-r1","title":"\ud83d\udd27 1. Configuration de R1","text":"<pre><code>interface GigabitEthernet0/0\n ip address 172.28.63.2 255.255.255.0\n standby 1 ip 172.28.63.10\n standby 1 priority 110\n standby 1 preempt\n</code></pre>"},{"location":"Routeur/hsrp/#dans-cette-configuration","title":"Dans cette configuration","text":"<p>L'interface GigabitEthernet0/0 de R1 est configur\u00e9e avec l'adresse IP 172.28.63.2.</p> <p><code>\"standby 1 ip 172.28.63.10\"</code> d\u00e9finit l'adresse VIP (Virtual IP) HSRP \u00e0 172.28.x.254. <code>\"standby 1 priority 110\"</code> d\u00e9finit la priorit\u00e9 de ce routeur \u00e0 110 (par d\u00e9faut est 100). <code>\"standby 1 preempt\"</code> permet \u00e0 R1 de reprendre automatiquement le r\u00f4le de routeur actif s'il redevient disponible apr\u00e8s une panne.</p>"},{"location":"Routeur/hsrp/#2-configuration-de-r2","title":"\ud83d\udd27 2. Configuration de R2","text":"<pre><code>interface GigabitEthernet0/0\n ip address 172.28.63.3 255.255.255.0\n standby 1 ip 172.28.63.10\n standby 1 priority 100\n standby 1 preempt\n</code></pre>"},{"location":"Routeur/hsrp/#dans-cette-configuration_1","title":"Dans cette configuration","text":"<p>L'interface GigabitEthernet0/0 de R2 est configur\u00e9e avec l'adresse IP 172.28.63.3.</p> <p><code>\"standby 1 ip 172.28.63.10\"</code> d\u00e9finit \u00e9galement l'adresse VIP HSRP \u00e0 172.28.63.10, qui est la m\u00eame que celle configur\u00e9e sur R1. <code>\"standby 1 priority 100\"</code> d\u00e9finit la priorit\u00e9 de ce routeur \u00e0 100. <code>\"standby 1 preempt\"</code> permet \u00e0 R2 de prendre le relais en tant que routeur actif si R1 devient indisponible.</p> <p>Ainsi, avec cette configuration, R1 sera le routeur actif tant qu'il est disponible. En cas de panne de R1 ou de sa connexion, R2 prendra automatiquement le relais en tant que routeur actif, assurant ainsi une haute disponibilit\u00e9 pour la VIP 172.28.63.10.</p>"},{"location":"Routeur/routeur/","title":"Configuration du routeur Cisco 1921","text":""},{"location":"Routeur/routeur/#1-configuration-initial","title":"\ud83d\udd27 1. Configuration initial","text":"<ol> <li>Premi\u00e8re \u00e9tape : R\u00e9initialiser le routeur a sa configuration d'origine sans le mot de passe admin. </li> </ol> <p><pre><code>#D\u00e9marer le routeur et presser CTR+BREAK pour \u00eatre en mode \"rommon\"\n\nconfreg 0x2142\nreset\n\n#Le routeur reboot sans configuration\n\nenable\nconfigure terminal\nconfig-register 0x2102 #Permet de remettre le switch sur le bon registre\nend\nwrite\n</code></pre> 2. Changer le Nom du routeur  <pre><code>enable \nconfig\nhostname CHA-R1\n</code></pre></p>"},{"location":"Routeur/routeur/#2-configuration-des-interfaces","title":"\ud83d\udd27 2. Configuration des interfaces","text":"<ol> <li>Configurer la premi\u00e8re interface Gigabit0/0 <pre><code>interface GigabitEthernet0/0\n ip address 183.44.28.1 255.255.255.252\n ip nat outside\n no shutdown\n</code></pre></li> <li>Configurer la deuxi\u00e8me interface Gigabit0/1 <pre><code>interface GigabitEthernet0/1\n no shutdown\n</code></pre></li> </ol> <p>Info(1)</p> <ol> <li>A noter que le port du switch coeur de r\u00e9seau reli\u00e9 au routeur doit \u00eatre configurer en mode trunk </li> </ol>"},{"location":"Routeur/routeur/#3-ajout-des-vlans","title":"\u2795 3. Ajout des vlans","text":"<ol> <li>Ajout du Vlan de management <pre><code>interface GigabitEthernet0/1.120\n encapsulation dot1Q 120\n ip address 10.10.120.20 255.255.255.0\n ip access-group 100 out\n</code></pre></li> <li>Ajout du Vlan d'interconnection <pre><code>interface GigabitEthernet0/1.223\n encapsulation dot1Q 223\n ip address 172.28.63.2 255.255.255.0\n ip nat inside\n</code></pre></li> </ol>"},{"location":"Routeur/routeur/#4-activation-du-ssh","title":"\ud83d\udfe2 4. Activation du SSH","text":"<ol> <li>G\u00e9n\u00e9ration des clef RSA  <pre><code>crypto key generate rsa\n2048\n</code></pre></li> <li>Cr\u00e9ation d'un compte local <pre><code>username admin privilege 15 secret MonMotDePasse\n</code></pre></li> <li>Activation du SSH sur les lignes VTY  <pre><code>line vty 0 4\nlogin local \ntransport input ssh \n</code></pre></li> <li>Selection de la bonne version SSH  <pre><code>ip ssh version 2\n</code></pre></li> </ol>"},{"location":"Routeur/routeur/#5-configuration-du-routage","title":"\ud83d\udd27 5. Configuration du routage","text":"<ol> <li>Activation du NAT  <pre><code>ip nat inside source list 1 interface GigabitEthernet0/0 overload \n</code></pre></li> <li>Cr\u00e9ation des routes de retour <pre><code>ip route 172.28.32.0 255.255.255.0 172.28.63.1\nip route 172.28.33.0 255.255.255.0 172.28.63.1\nip route 172.28.35.0 255.255.255.0 172.28.63.1\nip route 172.28.63.128 255.255.255.128 172.28.63.1 #LAN2DMZ\nip route 172.28.62.0 255.255.255.0 172.28.63.1 #DMZ\n</code></pre></li> <li>Cr\u00e9ation de la route par d\u00e9faut <pre><code>ip route 0.0.0.0 0.0.0.0 183.44.28.2\n</code></pre></li> </ol>"},{"location":"Routeur/routeur/#6-mise-en-place-des-acl","title":"\u2795 6. Mise en place des ACL","text":"<ol> <li>Creation de l'acces list contenant les r\u00e9seaux qui auront acc\u00e8s a internet <pre><code>access-list 1 permit 172.28.32.0 0.0.31.255 \n</code></pre></li> </ol> <p>Info (1)</p> <ol> <li> <p>A noter que le masque invers\u00e9 renvoie vers le r\u00e9seau 172.28.32.0/19 ce qui correspond a la plage de VLAN qui nous est atribu\u00e9. </p> </li> <li> <p>Creation de l'access list qui vas bloquer l'acc\u00e8s a internet au r\u00e9seau de management  <pre><code>access-list 100 deny ip 10.10.120.0 0.0.0.255 any\naccess-list 100 permit ip any any\n</code></pre></p> </li> </ol>"},{"location":"Routeur/routeur/#7-redirection-dns","title":"\ud83d\udd00 7. Redirection DNS","text":"<p>La redirection DNS permettra aux machine n'ayant pas de serveur DNS dans leur configuration \u00e0 pouvoir utiliser le DNS interne de Chartres</p> <pre><code>ip dns server \nip name-server 172.28.33.2\nip domain-lookup\n</code></pre>"},{"location":"Routeur/routeur/#8-protocole-hsrp","title":"\u2699\ufe0f 8. Protocole HSRP","text":"<p>Le HSRP est un protocole qui permet de cr\u00e9e une adresse VIP (Virtual IP) qui permet la haute disponibilit\u00e9 ente 2 routeurs. </p> <p>Dans notre cas nous allon mettre en place le HSRP entre nos deux routeurs R1 et R2, chaque routeur est connecter a une FAI diff\u00e9rente</p> <p>Info (1)</p> <ol> <li>Voir la page suivante dans la section \"Routeur\" avec la configuration du HSRP.</li> </ol>"},{"location":"SWCore/lacp_hp_a5500/","title":"Mise en place de LACP sur HP A5500","text":""},{"location":"SWCore/lacp_hp_a5500/#1-introduction","title":"1. Introduction","text":"<p>LACP (Link Aggregation Control Protocol) est d\u00e9fini dans la norme IEEE 802.3ad. Il permet de regrouper plusieurs interfaces physiques en une seule interface logique (Eth-Trunk) afin de : - augmenter la bande passante disponible, - assurer une redondance en cas de panne de lien, - r\u00e9partir le trafic r\u00e9seau entre plusieurs ports.  </p> <p>Dans une stack de switchs HP A5500, l\u2019utilisation de LACP est recommand\u00e9e pour les liaisons : - vers un autre switch (uplink inter-switch), - vers un serveur ou une infrastructure (ex. Nutanix, VMware).  </p>"},{"location":"SWCore/lacp_hp_a5500/#2-prerequis","title":"2. Pr\u00e9requis","text":"<ul> <li>Deux \u00e9quipements compatibles LACP (ex. switchs HP, serveur avec carte r\u00e9seau supportant IEEE 802.3ad).  </li> <li>M\u00eame configuration de vitesse et duplex sur les interfaces physiques.  </li> <li>VLAN et trunk configur\u00e9s de mani\u00e8re coh\u00e9rente de part et d\u2019autre du lien.  </li> <li>Acc\u00e8s en CLI sur le switch (console/SSH).</li> </ul>"},{"location":"SWCore/lacp_hp_a5500/#3-etapes-de-configuration","title":"3. \u00c9tapes de configuration","text":""},{"location":"SWCore/lacp_hp_a5500/#creation-du-port-logique","title":"Cr\u00e9ation du port logique","text":"<p>Depuis le mode configuration syst\u00e8me : <pre><code>[SW-A5500] system-view\n[SW-A5500] int bridge-aggregation 1\n[SW-A5500-Bridge-aggregation1] link-aggregation mode dynamic\n[SW-A5500-Bridge-aggregation1] quit\n</code></pre></p>"},{"location":"SWCore/lacp_hp_a5500/#ajout-des-interfaces-physiques-dans-le-port-link-aggregation","title":"Ajout des interfaces physiques dans le port link-aggregation","text":"<p>Exemple avec GigabitEthernet1/0/32 et GigabitEthernet2/0/32 : <pre><code>[SW-A5500] int gig 1/0/32\n[SW-A5500-GigabitEthernet1/0/32] port link-aggregation group 1\n\n[SW-A5500-GigabitEthernet2/0/32] int gig 2/0/32\n[SW-A5500-GigabitEthernet2/0/32] port link-aggregation group 1\n\n[SW-A5500-GigabitEthernet2/0/32] quit\n</code></pre></p> <ul> <li>Les interfaces physiques sont associ\u00e9es au groupe <code>Bridge-aggregation1</code>.  </li> <li>Elles deviennent des membres du port agr\u00e9g\u00e9.  </li> </ul>"},{"location":"SWCore/lacp_hp_a5500/#configuration-du-type-de-lien-trunkaccess","title":"Configuration du type de lien (trunk/access)","text":"<p>Si le lien doit transporter plusieurs VLANs (trunk) : <pre><code>[SW-A5500] int bridge-aggregation 1\n[SW-A5500-Bridge-aggregation1] port link-type trunk\n\n[SW-A5500-Bridge-aggregation1] port trunk permit vlan *num vlan* to *num vlan* \n\n[SW-A5500-Bridge-aggregation1] quit\n</code></pre> \u26a0\ufe0f \u27a1 Le PERMIT VLAN ALL ne fonctionne PAS sur le Swtich HP A5000 JD374A Comware version 5.20 (Raison Inconnu). \u26a0\ufe0f</p> <p>Si le lien est pour un seul VLAN (access) : <pre><code>[SW-A5500] int bridge-aggregation 1\n[SW-A5500-Bridge-aggregation1] port link-type access\n[SW-A5500-Bridge-aggregation1] port access vlan 10\n</code></pre></p> <pre><code>[SW-A5500] save\n</code></pre>"},{"location":"SWCore/lacp_hp_a5500/#verification-de-letat-lacp","title":"V\u00e9rification de l\u2019\u00e9tat LACP","text":"<p>Commande de diagnostic : <pre><code>[HP] display link-aggregation verbose\n</code></pre></p> <p>Exemple de sortie attendue : <pre><code>Aggregation Group 1:\n  Aggregation Mode: Dynamic\n  Selected Ports: GigabitEthernet1/0/32, GigabitEthernet2/0/32\n  Operational Key: 1\n</code></pre></p>"},{"location":"SWCore/lacp_hp_a5500/#4-points-importants","title":"4. Points importants","text":"<ul> <li>Tous les ports d\u2019un m\u00eame Bridge-Aggregaton doivent \u00eatre configur\u00e9s de mani\u00e8re identique (m\u00eame VLAN, m\u00eame mode trunk/access).  </li> <li>Sur l\u2019\u00e9quipement distant (autre switch, serveur), la configuration doit correspondre (m\u00eame agr\u00e9gation et VLANs).  </li> <li>LACP est dynamique : seuls les liens valides et actifs seront utilis\u00e9s dans l\u2019agr\u00e9gat.  </li> <li>En cas de panne d\u2019un lien, le trafic continue sur les liens restants.  </li> </ul>"},{"location":"SWCore/lacp_hp_a5500/#5-conclusion","title":"5. Conclusion","text":"<p>Avec LACP, tu disposes d\u2019un lien logique robuste et performant entre ton stack HP A5500 et un serveur ou autre switch. Cette configuration est standard et r\u00e9utilisable dans diff\u00e9rents contextes (uplink, serveur, cluster).  </p>"},{"location":"SWCore/reseau/","title":"Configuration des Switchs HP A5500 (Coeur de R\u00e9seau)","text":"<p>Cette documentation d\u00e9crit pas \u00e0 pas la configuration initiale d\u2019un switch HP A5500 sous Comware. Elle couvre les points suivants :  </p> <ul> <li>Connexion au switch via le port console depuis Linux Mint  </li> <li>R\u00e9initialisation de la configuration (factory reset)  </li> <li>Configuration d\u2019un stack IRF (Intelligent Resilient Framework)</li> <li>Mise en place d\u2019un VLAN de management (VLAN 120)  </li> <li>Activation de l\u2019acc\u00e8s SSH pour l\u2019administration  </li> </ul>"},{"location":"SWCore/reseau/#connexion-au-switch-via-port-console-linux-mint","title":"\ud83d\udd0c Connexion au switch via port console (Linux Mint)","text":""},{"location":"SWCore/reseau/#materiel-requis","title":"Mat\u00e9riel requis","text":"<ul> <li>C\u00e2ble console (RJ45-DB9 ou adaptateur USB-RJ45 selon le mod\u00e8le)</li> <li>PC sous Linux Mint avec droits administrateur</li> </ul>"},{"location":"SWCore/reseau/#etapes","title":"\u00c9tapes","text":"<ol> <li>Brancher le c\u00e2ble console entre le PC et le switch.  </li> </ol> <p>\u26a0\ufe0f Linux Mint ne supporte pas les Switchs HP d\u00fb \u00e0 un probl\u00e8me d'OS, donc il faut utiliser le Laptot Windows XP afin de configurer les \u00e9quipements HP sans probl\u00e8mes.</p> <p>Utiliser Putty sur le laptop et la connexion fonctionne directement.</p>"},{"location":"SWCore/reseau/#reinitialisation-de-la-configuration-factory-reset","title":"\ud83d\udd04 R\u00e9initialisation de la configuration (Factory Reset)","text":"<ol> <li>Une fois d\u00e9marr\u00e9, supprimer la configuration existante : <pre><code>&lt;HP&gt; reset saved-configuration\n</code></pre></li> </ol> <p>Si cette commande ne supprime pas correctement la conf, il faut les supprim\u00e9s manuellement un par un :  <pre><code>&lt;HP&gt; delete \"nom du fichier de conf \u00e0 supprimer\" \n</code></pre></p> <ol> <li> <p>Enregistrer :  <pre><code>&lt;HP&gt; save force \n</code></pre></p> </li> <li> <p>Red\u00e9marrer : <pre><code>&lt;HP&gt; reboot\n</code></pre></p> </li> </ol> <p>\ud83d\udc49 Le switch red\u00e9marre avec la configuration d\u2019usine.</p>"},{"location":"SWCore/reseau/#configuration-dun-stack-irf-intelligent-resilient-framework","title":"\ud83d\udd87 Configuration d\u2019un stack IRF (Intelligent Resilient Framework)","text":"<ol> <li>V\u00e9rifier que les deux switchs ont la m\u00eame version logicielle.</li> <li> <p>Configurer l\u2019ID IRF sur chaque switch : <pre><code>&lt;HP&gt; system-view\n[HP] irf member 1 renumber 1   \u2190 premier switch\n[HP] irf member 1 renumber 2   \u2190 deuxi\u00e8me switch\n</code></pre></p> </li> <li> <p>Sauvegarder et red\u00e9marrer : <pre><code>[HP] save\n</code></pre></p> </li> <li> <p>Configurer les ports IRF :</p> </li> </ol> <p>Rack4sw1 (Switch Master) IRF port configuration <pre><code>[Rack4sw1]interface Ten-GigabitEthernet 1/1/1\n[Rack4sw1-Ten-GigabitEthernet1/1/1]shutdown\n[Rack4sw1-Ten-GigabitEthernet1/1/1]quit\n[Rack4sw1]irf-port 1/1\n[Rack4sw1-irf-port1/1]port group interface Ten-GigabitEthernet 1/1/1\n[Rack4sw1-irf-port1/1]quit\n[Rack4sw1]interface Ten-GigabitEthernet 1/1/1\n[Rack4sw1-Ten-GigabitEthernet1/1/1]undo shutdown  \n[Rack4sw1]irf-port-configuration active\n[Rack4sw1]save force \n</code></pre></p> <p>Rack4sw2 (Switch Slave) port configuration <pre><code>[Rack6sw2]interface Ten-GigabitEthernet 2/1/1\n[Rack6sw2-Ten-GigabitEthernet2/1/1]shutdown\n[Rack6sw2-Ten-GigabitEthernet2/1/1]quit\n</code></pre></p> <pre><code>[Rack6sw2]irf-port 2/2\n[Rack6sw2-irf-port2/2]port group interface Ten-GigabitEthernet 2/1/1\n[Rack6sw2-irf-port2/2]quit\n</code></pre> <pre><code>[Rack6sw2]interface Ten-GigabitEthernet 2/1/1\n[Rack6sw2-Ten-GigabitEthernet2/1/1]undo shutdown\n[Rack6sw2-Ten-GigabitEthernet2/1/1]quit\n</code></pre> <p>Note: Save the configuation before activating the port.</p> <pre><code>[Rack6sw2]save force \n</code></pre> <ol> <li>Activer la configuration IRF et red\u00e9marrer : <pre><code>[HP] irf-port-configuration active\n[HP] save\n[HP] reboot\n</code></pre></li> </ol> <p>IRF verification <pre><code>&lt;Rack4sw1&gt;display irf&lt;br&gt;\n</code></pre></p> <pre><code>Switch  Role   Priority  CPU-Mac         Description&lt;br&gt;\n*+1   Master  1         b8af-xxxx-xxxx  -----&lt;br&gt;\n2   Slave   1         b8af-xxxx-xxxx  -----\n</code></pre>"},{"location":"SWCore/reseau/#etape-4-creation-dun-vlan-de-management-vlan-120","title":"\ud83c\udf10 \u00c9tape 4 : Cr\u00e9ation d\u2019un VLAN de management (VLAN 120)","text":"<ol> <li> <p>Cr\u00e9er le VLAN 120 : <pre><code>[HP] vlan 120\n[HP-vlan120] quit\n</code></pre></p> </li> <li> <p>Cr\u00e9er l\u2019interface VLAN et attribuer une adresse IP libre : <pre><code>[HP] interface Vlan-interface 120\n[HP-Vlan-interface120] ip address \"ip\" \"masque sous r\u00e9seau\"\n[HP-Vlan-interface120] quit\n</code></pre></p> </li> <li> <p>Associer un port physique au VLAN 120 : <pre><code>[HP] interface GigabitEthernet1/0/1\n[HP-GigabitEthernet1/0/1] port link-type access\n[HP-GigabitEthernet1/0/1] port access vlan 120\n</code></pre></p> </li> </ol> <p>\ud83d\udc49 Ce VLAN servira exclusivement pour l\u2019administration.</p>"},{"location":"SWCore/reseau/#etape-5-activer-et-securiser-lacces-ssh","title":"\ud83d\udd10 \u00c9tape 5 : Activer et s\u00e9curiser l\u2019acc\u00e8s SSH","text":"<ol> <li> <p>G\u00e9n\u00e9rer les cl\u00e9s RSA pour SSH : <pre><code>[HP] public-key local create rsa\n</code></pre></p> </li> <li> <p>Activer le service SSH (stelnet) : <pre><code>[HPSwitch] ssh server enable\n</code></pre></p> </li> <li> <p>Cr\u00e9er un utilisateur administrateur : <pre><code>[HP] local-user admin\n[HP-luser-admin] password simple MonMotDePasseFort\n[HP-luser-admin] service-type ssh\n[HP-luser-admin] authorization-attribute level 3\n</code></pre></p> </li> <li> <p>Configurer les sessions VTY pour n\u2019autoriser que SSH : <pre><code>[HP] user-interface vty 0 4\n[HP-ui-vty0-4] authentication-mode scheme\n[HP-ui-vty0-4] protocol inbound ssh\n[HP-ui-vty0-4] quit\n</code></pre></p> </li> </ol> <p>\ud83d\udc49 Ainsi, Telnet est d\u00e9sactiv\u00e9 et seul SSH est autoris\u00e9.</p>"},{"location":"SWCore/reseau/#etape-6-verifications-et-tests","title":"\u2705 \u00c9tape 6 : V\u00e9rifications et tests","text":"<ol> <li> <p>V\u00e9rifier l\u2019\u00e9tat du stack IRF : <pre><code>&lt;HP&gt; display irf\n</code></pre></p> </li> <li> <p>V\u00e9rifier l\u2019adresse IP du VLAN de management : <pre><code>&lt;HP&gt; display ip interface brief\n</code></pre></p> </li> <li> <p>Depuis un poste client, tester l\u2019acc\u00e8s SSH : <pre><code>ssh admin@ip.vlan.management\n</code></pre></p> </li> </ol> <p>\ud83d\udc49 Si tout est correct, la connexion doit s\u2019\u00e9tablir en SSH avec l\u2019utilisateur admin.</p> <ol> <li>Une fois SSH fonctionnel, il faut test un PING des machines physiques au Coeur de r\u00e9seau, des diff\u00e9rentes VM Nutanix Coeur de r\u00e9seau.</li> </ol> <p>\u26a0\ufe0f Si le ping depuis la machine physique vers la VM Windows ne fonctionne pas : activer une r\u00e8gle dans les param\u00e8tres du Pare-Feu de Windows afin d'autoriser les pings entrants car il les bloque par d\u00e9faut.</p>"},{"location":"SWCore/reseau/#etape-7-route-par-defaut","title":"\u00c9tape 7 : Route par d\u00e9faut","text":"<ol> <li>Tapez la commande pour d\u00e9finir la route par d\u00e9faut qui va vers le routeur :  <pre><code>[HP] ip route-static 0.0.0.0 0.0.0.0 172.28.63.10\n</code></pre></li> <li>V\u00e9rifier que votre route fonctionne :  <pre><code>[HP] ping 172.28.63.10\n</code></pre></li> </ol>"},{"location":"SWCore/reseau/#etape-8-relay-dhcp","title":"\u00c9tape 8 : Relay DHCP","text":"<p>\u2705 Commandes pour DHCP Relay sur A5500 / Comware 5 (v5.20)</p> <ol> <li>Activer le service DHCP globalement sur le switch : <pre><code>system-view\ndhcp enable\n</code></pre></li> <li>Cr\u00e9er un \u201cserver group\u201d pour les serveurs DHCP que tu veux utiliser : <pre><code>dhcp relay server-group &lt;num_groupe&gt; ip &lt;adresse_IP_serveur_DHCP&gt;\n</code></pre></li> <li>Pour chaque interface VLAN (ou interface L3) o\u00f9 se trouvent les clients DHCP, configurer :</li> <li>Donner une adresse IP \u00e0 l\u2019interface, si ce n\u2019est pas d\u00e9j\u00e0 fait : <pre><code>interface Vlan-interface &lt;num_vlan&gt;\nip address &lt;adresse_ip_interface&gt; &lt;masque&gt;\n</code></pre></li> <li>Activer le mode relais DHCP sur cette interface : <pre><code>dhcp select relay\n</code></pre></li> <li>Associer cette interface au server\u2010group que tu as d\u00e9fini : <pre><code>dhcp relay server-select &lt;num_groupe&gt;\n</code></pre></li> <li>V\u00e9rifier la configuration : <pre><code>display dhcp relay server-group\ndisplay dhcp relay\n</code></pre></li> </ol>"},{"location":"Service%20AD/ad/","title":"Installer et configurer Active Directory sur Windows Server.","text":""},{"location":"Service%20AD/ad/#introduction","title":"Introduction","text":"<p>L\u2019Active Directory (AD) est une fonctionnalit\u00e9 essentielle dans les environnements Windows Server, permettant la gestion centralis\u00e9e des utilisateurs, des ordinateurs et des ressources r\u00e9seau. Dans cet article, nous allons vous guider pas \u00e0 pas pour installer le r\u00f4le Active Directory et promouvoir votre serveur en tant que contr\u00f4leur de domaine. Pr\u00e9-requis</p> <p>Avant de commencer, assurez-vous de remplir les pr\u00e9requis suivants :</p> <pre><code>Syst\u00e8me d\u2019exploitation : Un serveur Windows (Windows Server 2016/2019 minimum recommand\u00e9 ou 2022 ou 2025).\nConfiguration r\u00e9seau :\n    - Une adresse IP fixe configur\u00e9e.\n    - Un nom d\u2019h\u00f4te clairement d\u00e9fini.\nAcc\u00e8s administrateur : Les droits d\u2019administrateur local sur le serveur.\nMise \u00e0 jour : Le serveur est \u00e0 jour avec les derniers correctifs de s\u00e9curit\u00e9.\n</code></pre>"},{"location":"Service%20AD/ad/#1-preparer-votre-serveur","title":"1. Pr\u00e9parer votre serveur \u2699\ufe0f","text":""},{"location":"Service%20AD/ad/#configurer-une-adresse-ip-fixe","title":"Configurer une adresse IP fixe :","text":"<p>Se rendre dans \u00ab Panneau de configuration -&gt; R\u00e9seau et internet -&gt; Centre r\u00e9seau et partage -&gt; Cliquer sur votre carte r\u00e9seau -&gt; Propri\u00e9t\u00e9 :</p> <p></p> <p>D\u00e9finissez une adresse IP, un masque de sous-r\u00e9seau et une passerelle.</p>"},{"location":"Service%20AD/ad/#renommer-le-serveur","title":"Renommer le serveur :","text":"<p>Allez dans Param\u00e8tres &gt; Syst\u00e8me &gt; Informations syst\u00e8me &gt; Renommer ce PC.</p> <p></p> <p>Donnez-lui un nom descriptif, comici c'est <code>CHA_DC_01</code> pour le premier contr\u00f4leur de domaine.</p> <p></p> <p>Puis Red\u00e9marrez le serveur.</p>"},{"location":"Service%20AD/ad/#2-ajouter-le-role-active-directory","title":"2. Ajouter le r\u00f4le Active Directory \u2795","text":""},{"location":"Service%20AD/ad/#ouvrir-le-gestionnaire-de-serveur","title":"Ouvrir le Gestionnaire de Serveur :","text":"<p>Cliquez sur G\u00e9rer &gt; Ajouter des r\u00f4les et fonctionnalit\u00e9s.</p> <p></p>"},{"location":"Service%20AD/ad/#selectionner-le-type-dinstallation","title":"S\u00e9lectionner le type d\u2019installation :","text":"<p>Choisissez Installation bas\u00e9e sur un r\u00f4le ou une fonctionnalit\u00e9 et cliquez sur Suivant.</p> <p></p>"},{"location":"Service%20AD/ad/#choisir-le-serveur-cible","title":"Choisir le serveur cible :","text":"<p>S\u00e9lectionnez le serveur sur lequel installer le r\u00f4le.</p> <p></p>"},{"location":"Service%20AD/ad/#selectionner-le-role-active-directory","title":"S\u00e9lectionner le r\u00f4le Active Directory :","text":"<p>Dans la liste, cochez Services de domaine Active Directory (AD DS).</p> <p>Confirmez l\u2019ajout des fonctionnalit\u00e9s n\u00e9cessaires.</p> <p></p>"},{"location":"Service%20AD/ad/#finaliser-linstallation","title":"Finaliser l\u2019installation :","text":"<p>Cliquez sur Installer.</p> <p>Une fois termin\u00e9, ne red\u00e9marrez pas imm\u00e9diatement, car vous devrez promouvoir le serveur en tant que contr\u00f4leur de domaine.</p> <p></p>"},{"location":"Service%20AD/ad/#3-promouvoir-le-serveur-en-controleur-de-domaine","title":"3. Promouvoir le Serveur en Contr\u00f4leur de Domaine \ud83d\udda5\ufe0f","text":""},{"location":"Service%20AD/ad/#lancer-lassistant","title":"Lancer l\u2019assistant :","text":"<p>Dans le Gestionnaire de Serveur, cliquez sur la notification indiquant que la configuration post-installation est n\u00e9cessaire.</p> <p>Cliquez sur Promouvoir ce serveur en contr\u00f4leur de domaine.</p> <p></p>"},{"location":"Service%20AD/ad/#creer-un-nouveau-domaine","title":"Cr\u00e9er un nouveau domaine :","text":"<p>Choisissez Ajouter une nouvelle for\u00eat. Entrez le nom de domaine racine, ici c'est <code>cha.chartres.sportludique.fr</code> pour les pages  </p>"},{"location":"Service%20AD/ad/#configurer-les-options-du-domaine","title":"Configurer les options du domaine :","text":"<p>S\u00e9lectionnez le niveau fonctionnel de la for\u00eat et du domaine (Windows Server 2016 ou plus r\u00e9cent).</p> <p>Configurez un mot de passe pour le mode de restauration des services d\u2019annuaire (DSRM).</p> <p></p>"},{"location":"Service%20AD/ad/#verification-dns-et-netbios","title":"V\u00e9rification DNS et NetBIOS :","text":"<p>V\u00e9rifiez le nom NetBIOS propos\u00e9 et ajustez-le si n\u00e9cessaire.</p> <p></p>"},{"location":"Service%20AD/ad/#valider-et-installer","title":"Valider et installer :","text":"<p>Laissez l\u2019assistant valider la configuration.</p> <p>Cliquez sur Installer. Le serveur red\u00e9marrera automatiquement.</p> <p></p>"},{"location":"Service%20AD/ad/#4-verifier-linstallation","title":"4. V\u00e9rifier l\u2019installation \u2705","text":""},{"location":"Service%20AD/ad/#confirmer-le-role-active-directory","title":"Confirmer le r\u00f4le Active Directory :","text":"<p>Apr\u00e8s le red\u00e9marrage, connectez-vous et ouvrez le Gestionnaire de Serveur. V\u00e9rifiez que le r\u00f4le AD DS est install\u00e9 et fonctionne correctement.</p>"},{"location":"Service%20AD/ad/#tester-le-domaine","title":"Tester le domaine :","text":"<p>Ouvrez l\u2019outil Active Directory Users and Computers.</p> <p></p> <p>Assurez-vous que votre domaine appara\u00eet et que les objets par d\u00e9faut (comme <code>Users</code> et <code>Computers</code>) sont pr\u00e9sents.</p>"},{"location":"Service%20AD/ad/#5-conclusion","title":"5. Conclusion \ud83d\udcc4","text":"<p>Vous avez maintenant un serveur configur\u00e9 comme contr\u00f4leur de domaine. Les prochaines \u00e9tapes incluront :</p> <ol> <li>Cr\u00e9er des unit\u00e9s organisationnelles (OU) : Pour organiser les utilisateurs et les ordinateurs.</li> <li>Ajouter des utilisateurs au domaine : Cr\u00e9ez des comptes pour les utilisateurs.</li> <li>Joindre un ordinateur au domaine : Pour int\u00e9grer des machines au r\u00e9seau Active Directory.</li> </ol>"},{"location":"Service%20AD/adbackup/","title":"Active Directory BackUP","text":""},{"location":"Service%20AD/adbackup/#1-installation-de-lad","title":"1. Installation de L'AD \ud83d\udce6","text":"<p>Suivre cette documentation pour configuer l'AD Backup en adaptant pour lui : Installe AD</p>"},{"location":"Service%20AD/adbackup/#2-redondance-ad1-et-ad2","title":"2. Redondance AD1 et AD2 \ud83d\udd04","text":""},{"location":"Service%20AD/adbackup/#redondance-ad-principal-et-ad-secondaire","title":"Redondance AD Principal et AD Secondaire","text":"<ul> <li>AD Principal : 172.28.33.2nom : CHA-DC-01.cha.chartres.sportludique.fr</li> <li>AD Secondaire : 172.28.33.3nom : CHA_DC_02.cha.chartres.sportludique.fr</li> <li>Domaine : cha.chartres.sportludique.fr</li> </ul> <p>Les deux h\u00e9bergent :</p> <ul> <li>Active Directory Domain Services (AD DS)</li> <li>DNS int\u00e9gr\u00e9 \u00e0 Active Directory</li> </ul> <p>Ainsi, si l'AD Principal tombe, les utilisateurs et ordinateurs peuvent encore :</p> <ul> <li>s'authentifer sur le domaine</li> <li>r\u00e9soudre les noms via DNS</li> </ul>"},{"location":"Service%20AD/adbackup/#mettre-lad-secondaire-en-controleur-de-domaine-secondaire","title":"Mettre l'AD Secondaire en contr\u00f4leur de domaine secondaire","text":"<ol> <li>Installer les r\u00f4les n\u00e9cessaires</li> </ol> <p>Dessus en PowerShell : <pre><code>Install-WindowsFeature AD-Domain-Services, DNS -IncludeManagementTools\n</code></pre></p> <ol> <li>Promouvoir en contr\u00f4leur de domaine <pre><code>Install-ADDSDomainController `\n    -DomainName \"cha.chartres.sportludique.fr\" `\n    -InstallDns:$true `\n    -Credential (Get-Credential) `\n    -SiteName \"Default-First-Site-Name\" `\n    -ReplicationSourceDC \"CHA_DC_01.cha.chartres.sportludique.fr\"\n</code></pre></li> </ol> <p>\ud83d\udca1 Une fen\u00eatre d\u2019authentification s\u2019ouvre \u2192 entre un compte du domaine ayant les droits d\u2019administrateur et red\u00e9marrer \u00e0 la fin.</p>"},{"location":"Service%20AD/adbackup/#verification-de-la-replication-ad","title":"V\u00e9rification de la r\u00e9plication AD \u2705","text":"<p>Sur Powershell : <pre><code>repadmin /replsummary\n</code></pre></p> <p>Si les deux AD s'affiche et qu'il n'y a aucune erreur alors la r\u00e9plication fonctionne.</p>"},{"location":"Service%20AD/adbackup/#configuration-dns-croisee","title":"Configuration DNS crois\u00e9e \ud83d\udd27","text":"<p>Sur AD Principal, configure : <pre><code>DNS pr\u00e9f\u00e9r\u00e9 : 172.28.33.2\nDNS secondaire : 172.28.33.3\n</code></pre></p> <p>Sur AD Secondaire : <pre><code>DNS pr\u00e9f\u00e9r\u00e9 : 172.28.33.3\nDNS secondaire : 172.28.33.2\n</code></pre></p>"},{"location":"Service%20AD/adbackup/#verification-de-la-replication-dns","title":"V\u00e9rification de la r\u00e9plication DNS \u2705","text":"<p>Sur AD Secondaire, ouvre :</p> <ul> <li>Gestionnaire DNS \u2192 Zones de recherche directe \u2192 cha.chartres.sportludique.fr</li> </ul> <p>Tu devrais y voir exactement les m\u00eames enregistrements que sur AD Principal. Si oui, la r\u00e9plication DNS fonctionne (gr\u00e2ce \u00e0 AD).</p>"},{"location":"Service%20AD/adbackup/#3-verification-finale","title":"3. V\u00e9rification finale \u2705","text":"<ol> <li> <p>\u00c9teins l'AD Principal.</p> </li> <li> <p>Sur le client, v\u00e9rifie la r\u00e9solution DNS : <pre><code>nslookup cha.chartres.sportludique.fr\n</code></pre> Si il y a une r\u00e9ponse sa veut dire que le DNS est bien redondant.</p> </li> <li> <p>Connecte-toi \u00e0 ton domaine :</p> </li> </ol> <p>Si l'authentification fonctionne alors l'AD est redondant aussi. Si ces deux test fonctionne alors notre AD Secondaire et bien en backup de l'AD Principal.</p>"},{"location":"Service%20AD/adcs/","title":"Cerficat ADCS & LDAPS","text":""},{"location":"Service%20AD/adcs/#1-ad-cs-active-directory-certificate-services-a-quoi-ca-sert","title":"1. AD CS (Active Directory Certificate Services) \u2014 \u00c0 quoi \u00e7a sert ?","text":"<p>AD CS est un r\u00f4le de Windows Server qui permet de cr\u00e9er et de g\u00e9rer une infrastructure de gestion de certificats (PKI \u2014 Public Key Infrastructure).  Concr\u00e8tement, il sert \u00e0 \u00e9mettre, renouveler et r\u00e9voquer des certificats num\u00e9riques utilis\u00e9s pour s\u00e9curiser les communications et authentifier les utilisateurs, ordinateurs ou services dans un environnement Active Directory.</p>"},{"location":"Service%20AD/adcs/#2-a-quoi-ca-sert-dans-un-active-directory","title":"2. \u00c0 quoi \u00e7a sert dans un Active Directory \ud83d\udd10","text":"<ul> <li>Authentification s\u00e9curis\u00e9e : permet d\u2019utiliser des certificats pour authentifier les utilisateurs et les machines (par exemple, avec les connexions Wi-Fi 802.1X ou VPN).</li> <li>Chiffrement : les certificats permettent de chiffrer les \u00e9changes (HTTPS, e-mails, fichiers\u2026).</li> <li>Signature num\u00e9rique : garantit l\u2019int\u00e9grit\u00e9 et la provenance des documents ou du code.</li> <li>Automatisation : dans un domaine AD, la d\u00e9livrance et le renouvellement des certificats peuvent \u00eatre automatis\u00e9s via les strat\u00e9gies de groupe (GPO).</li> </ul>"},{"location":"Service%20AD/adcs/#installer-le-role-ad-cs","title":"Installer le r\u00f4le \u00ab AD CS \u00bb","text":"<p>Allez dans \"Ajouter des r\u00f4les et des fonctionnalit\u00e9s\".</p> <p>Puis installer le service ci-dessous :</p> <p></p> <p>Finir l'intallation.</p>"},{"location":"Service%20AD/adcs/#telecharger-les-certificats-sur-la-machine-physique","title":"T\u00e9l\u00e9charger les certificats sur la machine physique","text":"<p>Allez dans le service et ouvrir L'autorit\u00e9 de certification :</p> <p></p> <p>Puis cliquez sur cha-CHA_DC_02-CA et allez dans les Propri\u00e9t\u00e9s :</p> <p></p> <p>Ensuite faite Afficher le certificat et allez dans D\u00e9tails :</p> <p></p> <p>Enfin cliquer sur Copier dans un fichier et suivre l'assistant d'exportation pour t\u00e9l\u00e9charger le fichier sur votre machine physique.</p>"},{"location":"Service%20AD/adcs/#certificat-sur-proxmox","title":"Certificat sur Proxmox","text":"<p>Afin de mettre en place le certificat sur Proxmox, allez voir la documentation suivante : LDAPS sur Proxmox</p>"},{"location":"Service%20AD/adusers/","title":"Script PowerShell \u2014 Cr\u00e9ation d'une Structure Active Directory","text":""},{"location":"Service%20AD/adusers/#1-objectif","title":"1. Objectif \ud83c\udfaf","text":"<p>Ce script PowerShell automatise la cr\u00e9ation d\u2019une arborescence Active Directory pour le domaine : cha.chartres.sportludique.fr.  </p> <p>Le script permet de cr\u00e9er automatiquement : - Les Unit\u00e9s Organisationnelles (OU) des diff\u00e9rents services. - Les utilisateurs correspondant aux r\u00f4les du projet. - Les groupes de s\u00e9curit\u00e9 associ\u00e9s. - Et une v\u00e9rification finale pour s\u2019assurer du bon d\u00e9ploiement.</p>"},{"location":"Service%20AD/adusers/#2-presentation-generale","title":"2. Pr\u00e9sentation g\u00e9n\u00e9rale \ud83d\udccb","text":"\u00c9l\u00e9ment D\u00e9tails Langage PowerShell Module requis <code>ActiveDirectory</code> Domaine <code>cha.chartres.sportludique.fr</code> Unit\u00e9 de base (root) <code>DC=cha,DC=chartres,DC=sportludique,DC=fr</code> OU cr\u00e9\u00e9es Direction, Marketing, Finances, Ressources Humaines, DSI Groupes cr\u00e9\u00e9s <code>G_DSI</code>, <code>G_RH</code> Utilisateurs cr\u00e9\u00e9s 5 (DSI + RH) Mot de passe par d\u00e9faut <code>P@ssword123</code> (modifiable dans la variable <code>$Password</code>)"},{"location":"Service%20AD/adusers/#3-contexte","title":"3. Contexte \ud83d\udcc4","text":"<ul> <li>Les utilisateurs Claude Postic (Directeur DSI) et Helen Paisley-Le Bihan (Directrice RH) ont \u00e9t\u00e9 cr\u00e9\u00e9s car le sc\u00e9nario du projet l\u2019exigeait, repr\u00e9sentant la direction de deux p\u00f4les essentiels de l\u2019entreprise.  </li> <li>Les utilisateurs David, Wassim et Simon repr\u00e9sentent les techniciens de la DSI.   <p>Ces trois comptes correspondent en r\u00e9alit\u00e9 aux administrateurs techniques et r\u00e9alisateurs du projet BTS SIO SISR.   Ils disposent de droits administratifs \u00e9tendus sur l\u2019infrastructure et servent \u00e0 la gestion et \u00e0 la maintenance du syst\u00e8me.</p> </li> </ul> <p>Ainsi, la structure refl\u00e8te \u00e0 la fois le besoin fonctionnel et le besoin technique (acc\u00e8s administrateur pour les concepteurs du projet).</p>"},{"location":"Service%20AD/adusers/#4-contenu-du-script","title":"4. Contenu du script \ud83d\udcc4","text":"<pre><code>powershell\nImport-Module ActiveDirectory\n\n# ============================\n# 1. Cr\u00e9ation des OU\n# ============================\nNew-ADOrganizationalUnit -Name \"Direction\" -Path \"DC=cha,DC=chartres,DC=sportludique,DC=fr\"\nNew-ADOrganizationalUnit -Name \"Marketing\" -Path \"DC=cha,DC=chartres,DC=sportludique,DC=fr\"\nNew-ADOrganizationalUnit -Name \"Finances\" -Path \"DC=cha,DC=chartres,DC=sportludique,DC=fr\"\nNew-ADOrganizationalUnit -Name \"Ressources Humaines\" -Path \"DC=cha,DC=chartres,DC=sportludique,DC=fr\"\nNew-ADOrganizationalUnit -Name \"DSI\" -Path \"DC=cha,DC=chartres,DC=sportludique,DC=fr\"\n\n# ============================\n# 2. Variables g\u00e9n\u00e9rales\n# ============================\n$Domaine = \"cha.chartres.sportludique.fr\"\n$Password = ConvertTo-SecureString \"P@ssword123\" -AsPlainText -Force\n\n# ============================\n# 3. Cr\u00e9ation des utilisateurs\n# ============================\n\n# --- DSI ---\nNew-ADUser -Name \"Claude Postic\" -GivenName \"Claude\" -Surname \"Postic\" `\n-DisplayName \"Claude Postic\" -SamAccountName \"claude.dsi\" `\n-UserPrincipalName \"claude.dsi@$Domaine\" `\n-Path \"OU=DSI,DC=cha,DC=chartres,DC=sportludique,DC=fr\" `\n-AccountPassword $Password -Enabled $true -Title \"Directeur DSI\"\n\nNew-ADUser -Name \"David\" -GivenName \"David\" -Surname \"Technicien\" `\n-DisplayName \"David\" -SamAccountName \"david.dsi\" `\n-UserPrincipalName \"david.dsi@$Domaine\" `\n-Path \"OU=DSI,DC=cha,DC=chartres,DC=sportludique,DC=fr\" `\n-AccountPassword $Password -Enabled $true -Title \"Technicien DSI\"\n\nNew-ADUser -Name \"Wassim\" -GivenName \"Wassim\" -Surname \"Technicien\" `\n-DisplayName \"Wassim\" -SamAccountName \"wassim.dsi\" `\n-UserPrincipalName \"wassim.dsi@$Domaine\" `\n-Path \"OU=DSI,DC=cha,DC=chartres,DC=sportludique,DC=fr\" `\n-AccountPassword $Password -Enabled $true -Title \"Technicien DSI\"\n\nNew-ADUser -Name \"Simon\" -GivenName \"Simon\" -Surname \"Technicien\" `\n-DisplayName \"Simon\" -SamAccountName \"simon.dsi\" `\n-UserPrincipalName \"simon.dsi@$Domaine\" `\n-Path \"OU=DSI,DC=cha,DC=chartres,DC=sportludique,DC=fr\" `\n-AccountPassword $Password -Enabled $true -Title \"Technicien DSI\"\n\n# --- Ressources Humaines ---\nNew-ADUser -Name \"Helen Paisley-Le Bihan\" -GivenName \"Helen\" -Surname \"Paisley-Le Bihan\" `\n-DisplayName \"Helen Paisley-Le Bihan\" -SamAccountName \"helen.rh\" `\n-UserPrincipalName \"helen.rh@$Domaine\" `\n-Path \"OU=Ressources Humaines,DC=cha,DC=chartres,DC=sportludique,DC=fr\" `\n-AccountPassword $Password -Enabled $true -Title \"Directrice RH\"\n\n# ============================\n# 4. (Optionnel) Cr\u00e9ation des groupes\n# ============================\nNew-ADGroup -Name \"G_DSI\" -GroupScope Global -Path \"OU=DSI,DC=cha,DC=chartres,DC=sportludique,DC=fr\"\nNew-ADGroup -Name \"G_RH\" -GroupScope Global -Path \"OU=Ressources Humaines,DC=cha,DC=chartres,DC=sportludique,DC=fr\"\n\nAdd-ADGroupMember -Identity \"G_DSI\" -Members \"claude.dsi\",\"david.dsi\",\"wassim.dsi\",\"simon.dsi\"\nAdd-ADGroupMember -Identity \"G_RH\" -Members \"helen.rh\"\n\n# ============================\n# 5. V\u00e9rification\n# ============================\nWrite-Host \"`n\u2705 Structure AD cr\u00e9\u00e9e avec succ\u00e8s !`n\"\nGet-ADOrganizationalUnit -Filter * | Select-Object Name\nGet-ADUser -Filter * | Select-Object Name, SamAccountName, DistinguishedName\n</code></pre>"},{"location":"Service%20AD/adusers/#5-attribution-des-droits-administrateurs-aux-utilisateurs-de-la-dsi","title":"5. Attribution des droits Administrateurs aux utilisateurs de la DSI \ud83d\udcdd","text":""},{"location":"Service%20AD/adusers/#le-groupe-admins-du-domaine","title":"Le groupe \u201cAdmins du domaine\u201d","text":""},{"location":"Service%20AD/adusers/#definition","title":"D\u00e9finition","text":"<p>Le groupe \u201cAdmins du domaine\u201d est un groupe de s\u00e9curit\u00e9 int\u00e9gr\u00e9 cr\u00e9\u00e9 automatiquement lors de l\u2019installation d\u2019un domaine Active Directory (\u00e9quivalent anglais : Domain Admins). Il est situ\u00e9 dans le conteneur :</p> <pre><code>CN=Users,DC=cha,DC=chartres,DC=sportludique,DC=fr\n</code></pre>"},{"location":"Service%20AD/adusers/#role","title":"R\u00f4le","text":"<p>Les membres du groupe Admins du domaine disposent de privil\u00e8ges complets sur :</p> <pre><code>- Tous les objets Active Directory (utilisateurs, ordinateurs, groupes, OU)\n- Les strat\u00e9gies de groupe (GPO)\n- Les serveurs et postes membres du domaine\n- Les droits d\u2019administration locale sur chaque machine du domaine\n</code></pre> <p>C\u2019est donc le plus haut niveau d\u2019administration au sein d\u2019un domaine AD.</p>"},{"location":"Service%20AD/adusers/#attribution-des-droits-aux-techniciens-dsi","title":"Attribution des droits aux techniciens DSI","text":"<p>L\u2019attribution s\u2019est faite \u00e0 l\u2019aide de la commande PowerShell suivante, ex\u00e9cut\u00e9e depuis une session administrateur sur un contr\u00f4leur de domaine :</p> <pre><code>Add-ADGroupMember -Identity \"Admins du domaine\" -Members \"david.dsi\",\"wassim.dsi\",\"simon.dsi\"\n</code></pre>"},{"location":"Service%20AD/adusers/#verification-de-lappartenance-au-groupe","title":"V\u00e9rification de l\u2019appartenance au groupe","text":"<p>Apr\u00e8s l\u2019ajout, la commande suivante a \u00e9t\u00e9 utilis\u00e9e pour v\u00e9rifier que les utilisateurs ont bien \u00e9t\u00e9 int\u00e9gr\u00e9s :</p> <pre><code>Get-ADGroupMember \"Admins du domaine\" | Select Name, SamAccountName\n</code></pre> <p>\ud83d\udccb R\u00e9sultat obtenu :</p> <pre><code>Name           SamAccountName\n----           ---------------\nAdministrator  administrator\nDavid          david.dsi\nWassim         wassim.dsi\nSimon          simon.dsi\n</code></pre>"},{"location":"Service%20AD/adusers/#6-script-creation-des-uo-utilisateurs-et-groupes-du-pole-chartre","title":"6. Script cr\u00e9ation des UO, Utilisateurs et Groupes du P\u00f4le Chartre.","text":"<p>\ud83e\uddfe Contexte</p> <p>Nous disposons d\u2019un fichier CSV nomm\u00e9 chartres.csv, contenant la liste des utilisateurs \u00e0 cr\u00e9er dans Active Directory. Chaque ligne du fichier indique :</p> <ul> <li>Le nom et pr\u00e9nom de l\u2019utilisateur,</li> <li>Le service auquel il appartient,</li> <li>Et \u00e9ventuellement le sous-service.</li> </ul> <p>L\u2019objectif est d\u2019automatiser la cr\u00e9ation de :</p> <ul> <li>Les Unit\u00e9s d\u2019Organisation (OU) correspondant aux services,</li> <li>Les sous-OU correspondant aux sous-services,</li> <li>Les groupes de s\u00e9curit\u00e9 associ\u00e9s \u00e0 chaque niveau (service et sous-service),</li> <li>Les utilisateurs, plac\u00e9s dans la bonne OU selon leur service/sous-service.</li> </ul> <p>\ud83d\udc65 Groupes de s\u00e9curit\u00e9</p> <p>Pour chaque service et sous-service, des groupes AD sont cr\u00e9\u00e9s afin de faciliter la gestion des droits. Les groupes suivent la convention de nommage suivante :</p> Niveau Exemple de nom de groupe Service global <code>GRP_&lt;Service&gt;</code> (exemple : <code>GRP_SAV</code>) Sous-service <code>GRP_&lt;Service&gt;_&lt;SousService&gt;</code> (exemples : <code>GRP_SAV_Responsable</code>, <code>GRP_Marketing_A</code>) <p>\ud83d\udc64 Utilisateurs</p> <p>Chaque utilisateur est cr\u00e9\u00e9 avec :</p> Champ Description Exemple Nom d\u2019affichage Combinaison du nom et du pr\u00e9nom de l\u2019utilisateur. <code>Dupont Jean</code> Identifiant de connexion (samAccountName) Format standardis\u00e9 : <code>nomdefamille.prenom</code>. <code>dupont.jean</code> Mot de passe initial Mot de passe g\u00e9n\u00e9rique attribu\u00e9 \u00e0 la cr\u00e9ation du compte. <code>Password</code> Changement de mot de passe obligatoire L\u2019utilisateur devra d\u00e9finir un nouveau mot de passe \u00e0 sa premi\u00e8re connexion. (Automatique) Gestion des doublons (collision) Si un samAccountName existe d\u00e9j\u00e0, un num\u00e9ro est ajout\u00e9 en suffixe pour garantir l\u2019unicit\u00e9. <code>dupont.jean2</code> <p>\ud83d\udcc1 Exemple de structure finale dans l\u2019AD : </p> <pre><code>OU=Users\n\u251c\u2500\u2500 OU=DIRECTION\n\u2502   \u2514\u2500\u2500 GRP_Direction\n\u251c\u2500\u2500 OU=DSI\n\u2502   \u2514\u2500\u2500 GRP_DSI\n\u251c\u2500\u2500 OU=RH\n\u2502   \u2514\u2500\u2500 GRP_RH\n\u251c\u2500\u2500 OU=COMPTABILITE\n\u2502   \u2514\u2500\u2500 GRP_Comptabilite\n\u251c\u2500\u2500 OU=SAV\n\u2502   \u251c\u2500\u2500 OU=Responsable\n\u2502   \u2514\u2500\u2500 OU=Operateur\n\u2502   \u251c\u2500\u2500 GRP_SAV\n\u2502   \u251c\u2500\u2500 GRP_SAV_Responsable\n\u2502   \u2514\u2500\u2500 GRP_SAV_Operateur\n\u251c\u2500\u2500 OU=Marketing\n\u2502   \u251c\u2500\u2500 OU=A\n\u2502   \u251c\u2500\u2500 OU=B\n\u2502   \u251c\u2500\u2500 OU=X\n\u2502   \u2514\u2500\u2500 OU=Y\n\u2502   \u251c\u2500\u2500 GRP_Marketing\n\u2502   \u251c\u2500\u2500 GRP_Marketing_A\n\u2502   \u251c\u2500\u2500 GRP_Marketing_B\n\u2502   \u251c\u2500\u2500 GRP_Marketing_X\n\u2502   \u2514\u2500\u2500 GRP_Marketing_Y\n\u2514\u2500\u2500 OU=Juridique\n    \u2514\u2500\u2500 GRP_Juridique\n</code></pre>"},{"location":"Service%20AD/adusers/#script-powershell-afin-de-mettre-en-place-les-consignes-ci-dessus","title":"Script Powershell afin de mettre en place les consignes ci-dessus.","text":"<pre><code># === Script cr\u00e9ation des UO, Utilisateurs et Groupes du P\u00f4le Chartres ===\n\nImport-Module ActiveDirectory\n\n$csvPath = \"C:\\Users\\Administrateur\\Documents\\chartres.csv\"\n$baseDN  = \"DC=cha,DC=chartres,DC=sportludique,DC=fr\"\n$domain  = \"cha.chartres.sportludique.fr\"\n$pw = ConvertTo-SecureString \"Password\" -AsPlainText -Force\n\n$subOUs = @{\n    \"SAV\"        = @(\"Responsable\",\"Operateur\")\n    \"Marketing\"  = @(\"A\",\"B\",\"X\",\"Y\")\n}\n\nfunction Remove-Accents($text){\n    $n = $text.Normalize([Text.NormalizationForm]::FormD)\n    -join ($n.ToCharArray() | Where-Object{[Globalization.CharUnicodeInfo]::GetUnicodeCategory($_) -ne \"NonSpacingMark\"})\n}\n\nfunction Unique-Sam($last,$first){\n    $b = ((Remove-Accents $last).ToLower() -replace \"\\s+\") + \".\" + ((Remove-Accents $first).ToLower() -replace \"\\s+\")\n    if($b.Length -gt 20){$b=$b.Substring(0,20)}\n    $s=$b;$i=1\n    while(Get-ADUser -Filter \"SamAccountName -eq '$s'\" -ErrorAction SilentlyContinue){$s=\"$b$i\";$i++}\n    return $s\n}\n\n$users = Import-Csv $csvPath -Delimiter ';' -Encoding Default\n\nforeach($u in $users){\n    $service = $u.service.Trim().ToUpper()\n    $sous = $u.'sous service'.Trim()\n    $nom = $u.NOM; $prenom = $u.PRENOM\n    if(!$nom -or !$prenom -or !$service){continue}\n\n    $ouService = \"OU=$service,$baseDN\"\n    if(-not (Get-ADOrganizationalUnit -Filter \"DistinguishedName -eq '$ouService'\" -ErrorAction SilentlyContinue)){\n        New-ADOrganizationalUnit -Name $service -Path $baseDN -ProtectedFromAccidentalDeletion $false\n    }\n\n    if($subOUs.ContainsKey($service)){\n        foreach($s in $subOUs[$service]){\n            $ouSous = \"OU=$s,OU=$service,$baseDN\"\n            if(-not (Get-ADOrganizationalUnit -Filter \"DistinguishedName -eq '$ouSous'\" -ErrorAction SilentlyContinue)){\n                New-ADOrganizationalUnit -Name $s -Path \"OU=$service,$baseDN\" -ProtectedFromAccidentalDeletion $false\n            }\n        }\n    }\n\n    $grpService = \"GRP_$service\"\n    if(-not (Get-ADGroup -Filter \"Name -eq '$grpService'\" -ErrorAction SilentlyContinue)){\n        New-ADGroup -Name $grpService -GroupScope Global -Path $ouService\n    }\n\n    if($sous -and $subOUs[$service] -contains $sous){\n        $grpSous = \"GRP_${service}_$sous\"\n        if(-not (Get-ADGroup -Filter \"Name -eq '$grpSous'\" -ErrorAction SilentlyContinue)){\n            New-ADGroup -Name $grpSous -GroupScope Global -Path \"OU=$sous,OU=$service,$baseDN\"\n        }\n        $targetOU = \"OU=$sous,OU=$service,$baseDN\"\n    } else {\n        $targetOU = $ouService\n    }\n\n    $sam = Unique-Sam $nom $prenom\n    $upn = \"$sam@$domain\"\n    $display = \"$nom $prenom\"\n\n    if(-not (Get-ADUser -Filter \"SamAccountName -eq '$sam'\" -ErrorAction SilentlyContinue)){\n        New-ADUser -Name $display -GivenName $prenom -Surname $nom -SamAccountName $sam -UserPrincipalName $upn -AccountPassword $pw -Enabled $true -ChangePasswordAtLogon $true -Path $targetOU\n    }\n\n    Add-ADGroupMember -Identity $grpService -Members $sam -ErrorAction SilentlyContinue\n    if($grpSous){Add-ADGroupMember -Identity $grpSous -Members $sam -ErrorAction SilentlyContinue}\n}\n</code></pre>"},{"location":"Service%20AD/dhcp/","title":"Installer et configurer un serveur DHCP sur Windows Server 2025.","text":""},{"location":"Service%20AD/dhcp/#1-installation-du-role-dhcp","title":"1. Installation du r\u00f4le DHCP \ud83d\udce6","text":"<p>Ouvrir le Gestionnaire de serveur. Cliquer sur G\u00e9rer, puis sur Ajouter des r\u00f4les et fonctionnalit\u00e9s.</p> <p>Choisir : \u00ab Installation bas\u00e9e sur un r\u00f4le ou une fonctionnalit\u00e9 \u00bb.</p> <p></p> <p>S\u00e9lectionner le serveur local.</p> <p></p> <p>Cocher Serveur DHCP, ajouter les fonctionnalit\u00e9s propos\u00e9es.</p> <p></p> <p>Nous n\u2019allons pas ajout\u00e9 de fonctionnalit\u00e9, nous pouvons faire suivant : </p> <p></p> <p>D\u00e9rouler la petite fl\u00e8che pour acc\u00e9der aux options :</p> <p></p> <p>Faire une nouvelle \u00e9tendue : </p> <p></p> <p>Cliquer sur suivant pour passer \u00e0 la prochaine \u00e9tape : </p> <p></p> <p>Nommer l'\u00e9tendue et une description pour pr\u00e9ciser sa signification (La description est facultative)</p> <p></p> <p>Remplir l'entendue avec les adresses IP correspondantes aux besoins.</p> <p></p> <p>Remplir les adresses IP exclu des \u00e9tendues DHCP.</p> <p></p> <p>Ne pas toucher au bail, cliquer juste sur Suivant.</p> <p></p> <p>Confirmer la mise en place de l'etendue DHCP.</p> <p></p> <p>Ajouter une passerelle par d\u00e9faut pour le routeur qui permettra l'acc\u00e8s \u00e0 Internet.</p> <p></p> <p>Ajouter un nom de Domaine ainsi que l'adresse correspondante au serveur DNS.</p> <p></p> <p>On ne mettra pas de serveur WINS, cliquer sur Suivant.</p> <p></p> <p>Confirmer l'activation de l'etendue.</p> <p></p> <p>Cliquer sur Suivant.</p> <p></p> <p>D\u00e9rouler les fl\u00e8ches afin de v\u00e9rifier si les extensions apparaissent bien dans le menu DHCP.</p> <p></p>"},{"location":"Service%20AD/dns/","title":"Installer et configurer un serveur DNS sur Windows Server.","text":"<p>Dans l\u2019assistant, s\u00e9lectionnez Installation bas\u00e9e sur un r\u00f4le ou une fonctionnalit\u00e9 : </p> <p>Choisissez votre serveur dans la liste propos\u00e9e : </p> <p>Dans la section des r\u00f4les, s\u00e9lectionnez le r\u00f4le DNS : </p> <p>Passez ensuite \u00e0 la section Confirmation et cliquez sur Installer pour lancer l\u2019installation.</p>"},{"location":"Service%20AD/dns/#1-configuration-du-service-dns","title":"1. Configuration du service DNS \ud83d\udd27","text":"<p>Dans l\u2019onglet Outils, s\u00e9lectionnez le service DNS : </p> <p>Effectuez un clic droit sur votre serveur puis cliquez sur Configurer un serveur DNS : </p> <p>Cr\u00e9ez une zone de recherche directe : </p> <p>Notre serveur g\u00e8re la zone enti\u00e8re et d\u00e9l\u00e8gue les requ\u00eates inconnues au DNS de notre FAI : </p> <p>Ajoutez le nom de la zone de recherche, dans notre cas chartres : </p> <p>Par mesure de s\u00e9curit\u00e9, seules les mises \u00e0 jour dynamiques s\u00e9curis\u00e9es seront autoris\u00e9es : </p> <p>Ajoutez l\u2019adresse IP du DNS public de votre choix. Dans notre cas, nous utilisons le serveur du r\u00e9seau Internet fictif : </p> <p>Enfin, enregistrez votre nouvelle zone de recherche DNS : </p>"},{"location":"Service%20AD/liaison-prox-ad/","title":"Documentation \u2014 Int\u00e9gration de Proxmox avec Active Directory (AD)","text":""},{"location":"Service%20AD/liaison-prox-ad/#1-objectif","title":"1. Objectif \ud83c\udfaf","text":"<p>Ce document d\u00e9taille les \u00e9tapes permettant de :</p> <ol> <li>Cr\u00e9er un utilisateur et un groupe d\u2019administration Proxmox dans Active Directory (AD).  </li> <li>Int\u00e9grer le domaine Active Directory dans Proxmox VE pour l\u2019authentification centralis\u00e9e.  </li> <li>Configurer les permissions dans Proxmox.  </li> <li>G\u00e9rer le mode d\u2019authentification LDAP / LDAPS.</li> </ol>"},{"location":"Service%20AD/liaison-prox-ad/#2-creation-des-utilisateurs-et-groupes-ad","title":"2. Cr\u00e9ation des utilisateurs et groupes AD \u270f\ufe0f","text":""},{"location":"Service%20AD/liaison-prox-ad/#description","title":"\ud83e\udde9 Description","text":"<p>Le script PowerShell suivant permet de :</p> <ul> <li>Cr\u00e9er l\u2019OU <code>UserServices</code> si elle n\u2019existe pas.</li> <li>Cr\u00e9er l\u2019utilisateur <code>proxmox.admin</code>.</li> <li>Cr\u00e9er le groupe <code>G_Proxmox_Admins</code>.</li> <li>Ajouter l\u2019utilisateur au groupe.</li> <li>V\u00e9rifier la cr\u00e9ation et l\u2019appartenance.</li> </ul>"},{"location":"Service%20AD/liaison-prox-ad/#script-powershell","title":"\ud83d\udcbb Script PowerShell","text":"<pre><code>Import-Module ActiveDirectory\n\n# ============================\n# 1. Variables g\u00e9n\u00e9rales\n# ============================\n$Domaine = \"cha.chartres.sportludique.fr\"\n$OUPath = \"OU=UserServices,DC=cha,DC=chartres,DC=sportludique,DC=fr\"\n$NomUtilisateur = \"proxmox.admin\"\n$NomComplet = \"proxmox\"\n$MotDePasse = ConvertTo-SecureString \"CHAPVE2526!\" -AsPlainText -Force\n$NomGroupe = \"G_Proxmox_Admins\"\n\n# ============================\n# 2. V\u00e9rification / Cr\u00e9ation de l'OU\n# ============================\nif (-not (Get-ADOrganizationalUnit -Filter \"Name -eq 'UserServices'\" -ErrorAction SilentlyContinue)) {\n    Write-Host \"\ud83d\udcc1 Cr\u00e9ation de l'OU 'UserServices'...\"\n    New-ADOrganizationalUnit -Name \"UserServices\" -Path \"DC=cha,DC=chartres,DC=sportludique,DC=fr\"\n} else {\n    Write-Host \"\u2705 L'OU 'UserServices' existe d\u00e9j\u00e0.\"\n}\n\n# ============================\n# 3. Cr\u00e9ation de l'utilisateur Proxmox\n# ============================\nif (-not (Get-ADUser -Filter \"SamAccountName -eq '$NomUtilisateur'\" -ErrorAction SilentlyContinue)) {\n    Write-Host \"\ud83d\udc64 Cr\u00e9ation de l'utilisateur '$NomUtilisateur'...\"\n    New-ADUser `\n        -Name $NomComplet `\n        -GivenName \"Proxmox\" `\n        -Surname \"Admin\" `\n        -SamAccountName $NomUtilisateur `\n        -UserPrincipalName \"$NomUtilisateur@$Domaine\" `\n        -Path $OUPath `\n        -AccountPassword $MotDePasse `\n        -Enabled $true `\n        -ChangePasswordAtLogon $false `\n        -PasswordNeverExpires $true `\n        -Description \"Compte d'administration Proxmox li\u00e9 \u00e0 l'AD\" `\n        -Title \"Service Infrastructure\"\n    Write-Host \"\u2705 Utilisateur '$NomUtilisateur' cr\u00e9\u00e9 avec succ\u00e8s.\"\n} else {\n    Write-Host \"\u2139\ufe0f L'utilisateur '$NomUtilisateur' existe d\u00e9j\u00e0, aucune action n\u00e9cessaire.\"\n}\n\n# ============================\n# 4. Cr\u00e9ation du groupe G_Proxmox_Admins\n# ============================\nif (-not (Get-ADGroup -Filter \"Name -eq '$NomGroupe'\" -ErrorAction SilentlyContinue)) {\n    Write-Host \"\ud83d\udc65 Cr\u00e9ation du groupe '$NomGroupe'...\"\n    New-ADGroup `\n        -Name $NomGroupe `\n        -GroupScope Global `\n        -GroupCategory Security `\n        -Path $OUPath `\n        -Description \"Groupe des administrateurs Proxmox\"\n    Write-Host \"\u2705 Groupe '$NomGroupe' cr\u00e9\u00e9 avec succ\u00e8s.\"\n} else {\ud83d\udda5\ufe0f \u00c9tape 2 \u2014 Int\u00e9gration du domaine AD dans Proxmox\n1\ufe0f\u20e3 Cr\u00e9ation du Realm (Royaume)\n\nChemin d\u2019acc\u00e8s :\nDatacenter \u2192 Permissions \u2192 Realms \u2192 Add \u2192 Active Directory\nChamp   Valeur\nRealm   ad\nDefault Domain  cha.chartres.sportludique.fr\nPort    389 (par d\u00e9faut)\nMode    LDAP (par d\u00e9faut)\nServer1 / Server2   10.10.120.2 et 10.10.120.3\nCommentaire Authentification AD\n    Write-Host \"\u2705 Le groupe '$NomGroupe' existe d\u00e9j\u00e0.\"\n}\n\n# ============================\n# 5. Ajout de l'utilisateur au groupe\n# ============================\nif (-not (Get-ADGroupMember -Identity $NomGroupe | Where-Object {$_.SamAccountName -eq $NomUtilisateur})) {\n    Write-Host \"\u2795 Ajout de l'utilisateur '$NomUtilisateur' au groupe '$NomGroupe'...\"\n    Add-ADGroupMember -Identity $NomGroupe -Members $NomUtilisateur\n    Write-Host \"\u2705 Utilisateur ajout\u00e9 au groupe avec succ\u00e8s.\"\n} else {\n    Write-Host \"\u2139\ufe0f L'utilisateur '$NomUtilisateur' est d\u00e9j\u00e0 membre du groupe '$NomGroupe'.\"\n}\n\n# ============================\n# 6. V\u00e9rification finale\n# ============================\nWrite-Host \"`n\ud83c\udfaf V\u00e9rification finale :\"\nGet-ADUser -Identity $NomUtilisateur -Properties Name,SamAccountName,DistinguishedName,PasswordNeverExpires | \nSelect-Object Name, SamAccountName, DistinguishedName, PasswordNeverExpires\n\nGet-ADGroupMember -Identity $NomGroupe | \nSelect-Object Name, SamAccountName\n\nWrite-Host \"`n\u2705 Script ex\u00e9cut\u00e9 avec succ\u00e8s.\"\n</code></pre>"},{"location":"Service%20AD/liaison-prox-ad/#2-integration-du-domaine-ad-dans-proxmox","title":"2. Int\u00e9gration du domaine AD dans Proxmox","text":""},{"location":"Service%20AD/liaison-prox-ad/#creation-du-realm-royaume","title":"Cr\u00e9ation du Realm (Royaume)","text":"<p>Chemin d\u2019acc\u00e8s :</p> <pre><code>Datacenter \u2192 Permissions \u2192 Realms \u2192 Add \u2192 Active Directory\n</code></pre> Champ Valeur Realm ad Default Domain cha.chartres.sportludique.fr Port 389 (par d\u00e9faut) Mode LDAP (par d\u00e9faut) Server1 / Server2 10.10.120.2 et 10.10.120.3 Commentaire Authentification AD"},{"location":"Service%20AD/liaison-prox-ad/#creation-de-lutilisateur-proxmox-dans-linterface","title":"Cr\u00e9ation de l\u2019utilisateur Proxmox dans l\u2019interface","text":"<p>Chemin d\u2019acc\u00e8s :</p> <pre><code>Datacenter \u2192 Permissions \u2192 Utilisateurs \u2192 Add\n</code></pre> Champ Valeur Nom utilisateur proxmox.admin Royaume Authentification AD Appliquer la GPO puis forcer la mise \u00e0 jour :"},{"location":"Service%20AD/liaison-prox-ad/#attribution-des-permissiation-ldap-ldaps","title":"Attribution des permissiation LDAP / LDAPS.","text":"<p>Chemin d\u2019acc\u00e8s :</p> <pre><code>Datacenter \u2192 Permissions \u2192 Add \u2192 Permissions de l'utilisateur\n</code></pre> Champ Valeur Chemin d'acc\u00e8s <code>/</code> (acc\u00e8s total) Utilisateur proxmox.admin@ad R\u00f4le Administrator Propager \u2705 Activ\u00e9 <p>\ud83d\udca1 Note : Le mode LDAP est temporaire. Une migration vers LDAPS sera effectu\u00e9e pour s\u00e9curiser les \u00e9changes. Nous activerons ici LDAP \u00e0 des fins de test uniquement, penser \u00e0 remettre la configuration par d\u00e9faut que nous allons modifier ci-dessous une fois le test termin\u00e9 !</p>"},{"location":"Service%20AD/liaison-prox-ad/#3-gestion-du-protocole-ldap-ldaps","title":"3. Gestion du protocole LDAP / LDAPS","text":"<p>Appliquer la GPO puis forcer la mise \u00e0 jour : \u26a0\ufe0f Probl\u00e9matique</p> <p>Depuis Windows Server 2019 (patch 2020) et renforc\u00e9 dans Windows Server 2022 / 2025, les connexions LDAP simples non chiffr\u00e9es (port 389) sont d\u00e9sormais bloqu\u00e9es ou limit\u00e9es.</p> <p>Erreur typique :</p> <pre><code>can't contact LDAP server\n</code></pre> <p>Raison : Les identifiants sont envoy\u00e9s en clair sur le r\u00e9seau.</p> <p>Recommandation : Utiliser LDAPS (port 636) pour chiffrer les \u00e9changes entre Proxmox et Active Directory.</p> <p>\ud83d\udca1 Note : Le mode LDAP est temporaire. Une migration vers LDAPS sera effectu\u00e9e pour s\u00e9curiser les \u00e9changes.  Voici la configuration du LADPS qui a \u00e9t\u00e9 r\u00e9alis\u00e9 : Tuto LDAPS</p> <p>M\u00e9thode : via la Strat\u00e9gie de groupe (GPO)</p> <ul> <li>Ouvrir la console de gestion des strat\u00e9gies de groupe (GPMC).</li> <li>\u00c9diter la GPO appliqu\u00e9e aux contr\u00f4leurs de domaine : <code>default domain policy</code> \u2192 Clique droit \u2192 Modifier.</li> </ul> <p>Naviguer vers :</p> <pre><code>Configuration ordinateur\n   \u2192 Strat\u00e9gies\n      \u2192 Param\u00e8tres Windows\n         \u2192 Param\u00e8tres de s\u00e9curit\u00e9\n            \u2192 Strat\u00e9gies locales\n               \u2192 Options de s\u00e9curit\u00e9\n</code></pre> <p>Modifier les param\u00e8tres suivants :</p> Param\u00e8tre Valeur Contr\u00f4leur de domaine : conditions requises pour la signature de serveur LDAP Aucun Contr\u00f4leur de domaine : application des conditions requises pour la signature de serveur LDAP D\u00e9sactiv\u00e9 Contr\u00f4leur de domaine : configuration requise pour le jeton de liaison du canal du serveur LDAP Lorsqu\u2019il est pris en charge <p>Appliquer la GPO puis forcer la mise \u00e0 jour :</p> <pre><code>gpupdate /force\n</code></pre>"},{"location":"Service%20AD/servfichier/","title":"Installation et configuration d\u2019un serveur de fichiers sur Windows Server","text":""},{"location":"Service%20AD/servfichier/#1-introduction","title":"1. Introduction","text":"<p>Un serveur de fichiers permet de centraliser, partager et s\u00e9curiser l\u2019acc\u00e8s aux donn\u00e9es dans une infrastructure r\u00e9seau. C\u2019est l\u2019un des r\u00f4les les plus courants et utiles sur un serveur Windows. </p> <p>Dans cet article, nous allons voir comment installer et configurer un serveur de fichiers sur Windows Server, avec une explication des diff\u00e9rentes options disponibles pour adapter la configuration \u00e0 vos besoins.</p>"},{"location":"Service%20AD/servfichier/#2-prerequis","title":"2. Pr\u00e9requis","text":"<p>Un Windows Server install\u00e9 (et de pr\u00e9f\u00e9rence rejoint \u00e0 un domaine). Un disque ou volume disponible pour le stockage des donn\u00e9es. Une connexion \u00e0 l\u2019interface d\u2019administration(Gestionnaire de serveur).</p> <ol> <li>Installer le r\u00f4le \u00ab Serveur de fichiers \u00bb</li> </ol> <p>Ouvrir le Gestionnaire de serveur. Cliquer sur G\u00e9rer, puis sur Ajouter des r\u00f4les et fonctionnalit\u00e9s :</p> <p></p> <p>Dans l\u2019assistant, s\u00e9lectionner Installation bas\u00e9e sur un r\u00f4le ou une fonctionnalit\u00e9 :</p> <p></p> <p>Choisir votre serveur dans la liste propos\u00e9e :</p> <p></p> <p>Dans la section des r\u00f4les, cocher Services de fichiers et de stockage, puis Services de fichiers et iSCSI puis cochez Serveur de fichiers dans les sous-r\u00f4les propos\u00e9s :</p> <p></p> <p>Pour une configuration standard, le Serveur de fichiers suffit. Passez \u00e0 la section Confirmation et cliquez sur Installer pour lancer l\u2019installation. Vous pouvez ensuite cliquer sur Installer :</p> <p></p> <p>Finaliser l\u2019installation en suivant l\u2019assistant jusqu\u2019au bout :</p> <p></p> <ol> <li>Cr\u00e9er un dossier partag\u00e9</li> </ol> <p>Ouvrir l\u2019outil Gestionnaire de serveur, puis aller dans Services de fichiers et de stockage &gt; Partages :</p> <p></p> <p>Cliquer sur T\u00e2ches, puis s\u00e9lectionner Nouveau partage :</p> <p></p> <p>Choisir le type de partage selon le besoin : SMB \u2013 Partage rapide pour un usage courant, ou SMB \u2013 Avanc\u00e9 pour configurer plus en d\u00e9tail les autorisations :</p> <p></p> <p>S\u00e9lectionner le serveur et le disque sur lequel sera cr\u00e9\u00e9 le dossier \u00e0 partager, ou en cr\u00e9er un nouveau via l\u2019interface :</p> <p></p> <p>D\u00e9finir les param\u00e8tres comme le nom du partage, le chemin d\u2019acc\u00e8s :</p> <p></p> <p>Configurer les autorisations d\u2019acc\u00e8s selon les besoins (voir section suivante pour les d\u00e9tails) :</p> <p></p>"},{"location":"Services/Web/","title":"Serveur WEB","text":""},{"location":"Services/Web/#1-objectifs","title":"\ud83c\udfaf 1. Objectifs","text":"<p>H\u00e9berger un site web fais partie des services \"basiques\" d'une entreprise, dans notre cas nous allons impl\u00e9menter un premier site web sur un serveur Apache2 heberger sur une machine Debian 13.</p>"},{"location":"Services/Web/#2-installation-dapache2","title":"\ud83d\udce6 2. Installation d'Apache2","text":"<p>Mettez a jour votre syst\u00e8me : <pre><code>sudo apt update \nsudo apt full-upgrade\n</code></pre> Installez les packages Apache2  <pre><code>sudo apt install apache2\n</code></pre></p>"},{"location":"Services/Web/#3-configuration-dapache2","title":"\ud83d\udd27 3. Configuration d'Apache2","text":""},{"location":"Services/Web/#besoins","title":"Besoins","text":"<p>Dans notre cas ce serveur vas a terme heberger plusieurs sites internets, nous aurons donc besoin des VirtualsHosts. (1)</p> <ol> <li>Toute la documentation sur les VirtualsHosts est contenue sur it-connect</li> </ol>"},{"location":"Services/Web/#creation-de-la-page","title":"Cr\u00e9ation de la page","text":"<p>Nous allons tout dabord cr\u00e9e un nouveau r\u00e9pertoire et lui donner les bonnes permissions dans le dossier <code>/var/www/</code> afin que le VHost puisse avoir un Symlink qui pointe vers un site. <pre><code>sudo mkdir /var/www/chartres\nsudo chown -R www-data:www-data /var/www/ville\nsudo chmod -R 755 /var/www/ville\n</code></pre></p> <p>Ensuite il nous faut cr\u00e9e le fichier index.html qui seras la page de base de notre site. <pre><code>sudo nano /var/www/ville/index.html\n</code></pre></p> <p>Dans ce fichier nous allons cr\u00e9e une page des plus basiques juste pour pouvoir tester notre VHost par la suite.  <pre><code>&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;Bienvenue sur Chartres.sportludique&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Bienvenue sur chartres.sportludique&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre></p>"},{"location":"Services/Web/#creation-du-fichier-vhost","title":"Cr\u00e9ation du fichier VHost","text":"<p>Nous allons cr\u00e9e le fichier de configuration VHost dans le dossier <code>/etc/apache2/sites-available</code> : <pre><code>sudo nano /etc/apache2/sites-available/www.chartres.sportludique.fr.conf\n</code></pre></p> <p>Dans ce fichier de configuration nous avons copier et adapter la configuration du fichier 000-default.conf</p> <pre><code>&lt;VirtualHost 172.28.62.2:80&gt;\n    # The ServerName directive sets the request scheme, hostname and port that\n    # the server uses to identify itself. This is used when creating\n    # redirection URLs. In the context of virtual hosts, the ServerName\n    # specifies what hostname must appear in the request's Host: header to\n    # match this virtual host. For the default virtual host (this file) this\n    # value is not decisive as it is used as a last resort host regardless.\n    # However, you must set it for any further virtual host explicitly.\n    #ServerName www.example.com\n\n    ServerAdmin admin@chartres.sportludique.fr\n    DocumentRoot /var/www/chartres\n\n    # Available loglevels: trace8, ..., trace1, debug, info, notice, warn,\n    # error, crit, alert, emerg.\n    # It is also possible to configure the loglevel for particular\n    # modules, e.g.\n    #LogLevel info ssl:warn\n\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n    # For most configuration files from conf-available/, which are\n    # enabled or disabled at a global level, it is possible to\n    # include a line for only one particular virtual host. For example the\n    # following line enables the CGI configuration for this host only\n    # after it has been globally disabled with \"a2disconf\".\n    #Include conf-available/serve-cgi-bin.conf\n&lt;/VirtualHost&gt;\n</code></pre> <p>Dans notre cas nous modifions l'adresse sur laquel notre service \u00e9coute sois l'interface DMZ, l'adresse mail du responsable du site et enfin le chemin vers le site. </p>"},{"location":"Services/Web/#ajout-du-lien-symlink","title":"Ajout du lien Symlink","text":"<p>Ce lien qui est l'equivalent d'un racourcis permet d'aller directement vers le site r\u00e9pertorier dans le fichier de configuration du VHost, le VHost iras directement cherche le site dans le bon r\u00e9pertoire. </p> <pre><code>sudo a2ensite www.chartres.sportludique.fr.conf\nsudo systemctl reload apache2\n</code></pre> <p>Le VHost est maintenant configurer et pr\u00eat \u00e0 fonctionner.</p>"},{"location":"Services/bdd/","title":"Base De Donn\u00e9es","text":""},{"location":"Services/bdd/#installation","title":"Installation","text":"<p>Pour commencer, mettez \u00e0 jour votre syst\u00e8me : <pre><code>sudo apt update\nsudo apt full-upgrade\n</code></pre> Installez le service MariaDB : <pre><code>sudo apt install mariadb-server mariadb-client \n</code></pre> V\u00e9rifiez que le service est actif :  <pre><code>sytemctl status mariadb\n</code></pre></p> <p>Si le service n'es pas actif (1)</p> <ol> <li><code>systemctl enable mariadb  systemctl start mariadb</code></li> </ol>"},{"location":"Services/bdd/#securisation-basique","title":"S\u00e9curisation basique","text":"<p>Nous allons s\u00e9curiser l'acces a la base de donn\u00e9e gr\u00e2ce aux syst\u00e8me int\u00e9gr\u00e9es a mariaDB <pre><code>sudo mysql_secure_installation \n    NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB SERVERS IN PRODUCTION USE! PLEASE READ EACH STEP CAREFULLYI\n\nIn order to log into MariaDB to secure it, we'll need the current password for the root user. If you've just installed MariaDB, and haven't set the root password yet, you should just press enter here,\n\nEnter current password for root (enter for none):\n</code></pre> Choisiez si vous voulez changer le socket d'authentification pour unix : <pre><code>Enter current password for root (enter for none); OK, successfully used password, moving on.\n\nSetting the root password or using the unix_socket ensures that nobody can log into the MariaDB root user without the proper authorisation,\n\nYou already have your root account protected, so you can safely answer\n\nSwitch to unix socket authentication [Y/n] : n\n</code></pre></p> <p>Info (1)</p> <ol> <li>Dans notre cas, comme indiqu\u00e9 sur la ligne de commande, le compte root est d\u00e9ja s\u00e9curis\u00e9, nul besoin d'activer ce socket d'authentification</li> </ol> <p>Changer le mot de passe root si besoin :  <pre><code>you already have your root account protected, so you can safely answer 'n'\n\nChange the root password? [Y/n]: n\n</code></pre></p> <p>Suprimmer les utilisateurs anonymes : </p> <pre><code>By default, a MariaDB installation has an anonymous user, allowing anyone to log into MariaDB without having to have a user account created for them. This is intended only for testing, and to make the installation go a bit smoother. You should remove them before moving into a\n\nproduction environment.\n\nRemove anonymous users? [Y/n]: y\n</code></pre> <p>D\u00e9sactivez le login a distance via le compte root si besoin (1)</p> <ol> <li>Dans notre cas, tout les acc\u00e8s se feront via SSH donc nous laisserons l'option active</li> </ol> <p>Suprimez la base de donn\u00e9e test : </p> <pre><code>By default, MariaDB comes with a database named 'test' that anyone can access, This is also intended only for testing, and should be removed before moving into a production environment,\n\nRemove test database and access to it? [Y/n] y\n</code></pre> <p>Pour finir, metez la table des privileges a jour pour appliquer vos modifications :  <pre><code>Reloading the privilege tables will ensure that all changes made so far will take effect immediately,\n\nReload privilege tables now? [Y/n] y ... Success!\n\nCleaning up...\n\nAll done! If you've completed all of the above steps, your MariaDB installation should now be secure.\n\nThanks for using MariaDBI bdd@CHA-BDD:\"$\n</code></pre></p>"}]}